<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>base documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">base documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>DatosSociedadPersona</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/components/sociedad/editar-sociedad/editar-sociedad.component.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#acta">acta</a>
                                </li>
                                <li>
                                        <a href="#fecha_alta">fecha_alta</a>
                                </li>
                                <li>
                                        <a href="#fecha_baja">fecha_baja</a>
                                </li>
                                <li>
                                        <a href="#fechaCambio">fechaCambio</a>
                                </li>
                                <li>
                                        <a href="#fechaInicio">fechaInicio</a>
                                </li>
                                <li>
                                        <a href="#idSociedad">idSociedad</a>
                                </li>
                                <li>
                                        <a href="#motivoCambio">motivoCambio</a>
                                </li>
                                <li>
                                        <a href="#razonSocial">razonSocial</a>
                                </li>
                                <li>
                                        <a href="#registro">registro</a>
                                </li>
                                <li>
                                        <a href="#rfc">rfc</a>
                                </li>
                                <li>
                                        <a href="#tipoMoral">tipoMoral</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="acta"></a>
                                        <span class="name"><b>acta</b><a href="#acta"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>acta:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="fecha_alta"></a>
                                        <span class="name"><b>fecha_alta</b><a href="#fecha_alta"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>fecha_alta:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="fecha_baja"></a>
                                        <span class="name"><b>fecha_baja</b><a href="#fecha_baja"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>fecha_baja:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="fechaCambio"></a>
                                        <span class="name"><b>fechaCambio</b><a href="#fechaCambio"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>fechaCambio:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="fechaInicio"></a>
                                        <span class="name"><b>fechaInicio</b><a href="#fechaInicio"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>fechaInicio:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="idSociedad"></a>
                                        <span class="name"><b>idSociedad</b><a href="#idSociedad"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>idSociedad:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="motivoCambio"></a>
                                        <span class="name"><b>motivoCambio</b><a href="#motivoCambio"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>motivoCambio:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="razonSocial"></a>
                                        <span class="name"><b>razonSocial</b><a href="#razonSocial"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>razonSocial:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="registro"></a>
                                        <span class="name"><b>registro</b><a href="#registro"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>registro:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="rfc"></a>
                                        <span class="name"><b>rfc</b><a href="#rfc"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>rfc:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="tipoMoral"></a>
                                        <span class="name"><b>tipoMoral</b><a href="#tipoMoral"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>tipoMoral:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, OnInit, Inject, ViewChild } from &#x27;@angular/core&#x27;;
import { MatSnackBar } from &#x27;@angular/material/snack-bar&#x27;;
import { HttpClient, HttpHeaders } from &#x27;@angular/common/http&#x27;;
import { environment } from &#x27;@env/environment&#x27;;
import { AuthService } from &#x27;@serv/auth.service&#x27;;
import { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from &#x27;@angular/material/dialog&#x27;;
import { ActivatedRoute, Router } from &#x27;@angular/router&#x27;;
import { FormBuilder, FormArray, FormGroup, FormControl, Validators } from &#x27;@angular/forms&#x27;;
import { MatPaginator } from &#x27;@angular/material/paginator&#x27;;
import * as moment from &#x27;moment&#x27;;
import * as FileSaver from &#x27;file-saver&#x27;;
import { DialogConfirmacionComponent } from &#x27;@comp/dialog-confirmacion/dialog-confirmacion.component&#x27;;

export interface DatosSociedad {
    razonSocial: string;
    rfc: string;
    acta: string;
    tipoMoral: string;
    fechaInicio: Date;
    motivoCambio: string;
    fechaCambio: Date;
    registro: string;
    fecha_alta: Date;
    fecha_baja: Date;
    tipoPersona: string;
    nombre: string;
    apaterno: string;
    amaterno: string;
    curp: string;
    ine: string;
    idDocIdent: number;
    docIdent: string;
    fechaNacimiento: Date;
    fechaDefuncion: Date;
    celular: string;
    email: string;
}

export interface DataDomicilio {
    codtiposdireccion: string;
    idestado: number;
    estado: string;
    idmunicipio: number;
    idmunicipio2: number;
    municipio: string;
    delegacion: string;
    idciudad: number;
    ciudad: string;
    codasentamiento: number;
    idtipoasentamiento: number;
    asentamiento: string;
    codtiposvia: number;
    idtipovia: number;
    via: string;
    idtipolocalidad: number;
    localidad: string;
    cp: string;
    nexterior: string;
    entrecalle1: string;
    entrecalle2: string;
    andador: string;
    edificio: string;
    seccion: string;
    entrada: string;
    ninterior: string;
    telefono: string;
    adicional: string;
    id_direccion: string;
  }

  export interface DataRepresentacion {
    tipoPersona: string;
    nombre: string;
    apaterno: string;
    amaterno: string;
    rfc: string;
    curp: string;
    ine: string;
    idDocIdent: number;
    docIdent: string;
    fechaNacimiento: Date;
    fechaDefuncion: Date;
    celular: string;
    email: string;
    actPreponderante: string;
    idTipoPersonaMoral: number;
    fechaInicioOperacion: Date;
    idMotivo: number;
    fechaCambio: Date;
    texto: string;
    fechaCaducidad: Date;
    documentoRepresentacion: DataDocumentoRepresentacion;
}
export interface DataDocumentoRepresentacion {
    codtipodocumento: number;
    nombreTipoDocumento: string;
    codtipodocumentojuridico: string;
    nombreTipoDocumentoJuridico: string;
    idnotario: number;
    noNotario: string;
    ciudadNotario: string;
    nombreNotario: string;
    num_escritura: string;
    fecha: Date;
    descripcion: string;
    lugar: string;
    archivos: Array&lt;{nombre: string, base64: string}&gt;;
}

@Component({
    selector: &#x27;app-editar-sociedad&#x27;,
    templateUrl: &#x27;./editar-sociedad.component.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class EditarSociedadComponent implements OnInit {
    endpoint &#x3D; environment.endpoint + &#x27;registro/getSociedadValuacion&#x27;;
    endpointTable &#x3D; environment.endpoint + &#x27;registro/getPeritoBySociedad&#x27;;
    endpointActualiza &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;nombre&#x27;,&#x27;registro&#x27;, &#x27;rfc&#x27;, &#x27;elimina&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    loading &#x3D; false;
    dataSocedadResultado;
    dataSource;
    dataPaginate;
    httpOptions;
    search &#x3D; false;
    query;
    idSociedad;
    idPeritoD;
    panelDomicilio &#x3D; false;
    panelDomPredial &#x3D; false;
    panelEspecifico &#x3D; false;
    panelSociedades &#x3D; false;
    panelRepresentantes &#x3D; false;
    panelRepresentados &#x3D; false;
    botonEdit &#x3D; false;
    datosSociedad: DatosSociedad &#x3D; {} as DatosSociedad;
    dataDomicilios: DataDomicilio[] &#x3D; [];
    dataDomicilioEspecifico: DataDomicilio[] &#x3D; [];
    displayedColumnsDom: string[] &#x3D; [&#x27;tipoDir&#x27;, &#x27;direccion&#x27;, &#x27;historial&#x27;, &#x27;editar&#x27;];
    displayedColumnsRepdo: string[] &#x3D; [&#x27;representacion&#x27;,&#x27;texto&#x27;,&#x27;caducidad&#x27;,&#x27;editar&#x27;,&#x27;eliminar&#x27;];
    loadingDomicilios &#x3D; false;
    loadingDireccionEspecifica &#x3D; false;
    loadingRepresentante &#x3D; false;
    loadingRepresentado &#x3D; false;
    loadingDatosPerito &#x3D; false;
    paginaDom &#x3D; 1;
    totalDom &#x3D; 0;
    pageSizeDom &#x3D; 15;
    dataDomicilioResultado;
    dataSourceDom &#x3D; [];
    dataPaginateDom;
    dataRepresentantes: DataRepresentacion[] &#x3D; [];
    dataRepresentados: DataRepresentacion[] &#x3D; [];
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
    cambioPersona;
    actCambioPersona &#x3D; true;
    isRequired &#x3D; true;
    fisicaFormGroup: FormGroup;
    moralFormGroup: FormGroup;
    mensajeConfirma;

    /*Paginado*/
    dataSource1 &#x3D; [];
    total1 &#x3D; 0;
    pagina1&#x3D; 1;
    dataPaginate1;
    dataSource2 &#x3D; [];
    total2 &#x3D; 0;
    pagina2&#x3D; 1;
    dataPaginate2;
    dataSource4 &#x3D; [];
    total4 &#x3D; 0;
    pagina4&#x3D; 1;
    dataPaginate4;
    dataSource5 &#x3D; [];
    total5 &#x3D; 0;
    pagina5&#x3D; 1;
    dataPaginate5;
   /*Paginado*/

    constructor(
        private http: HttpClient,
        private auth: AuthService,
        private _formBuilder: FormBuilder,
        private snackBar: MatSnackBar,
        public dialog: MatDialog,
        private route: ActivatedRoute
    ) { }

    /**
     * Se define las valdiciones del formulario, valida la sesión del usuario y llama a los metodos
     * necesarios para mostrar en la pantalla.
     */
    ngOnInit(): void {
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
              &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
              Authorization: this.auth.getSession().token
            })
        };

        this.fisicaFormGroup &#x3D; this._formBuilder.group({
            nombre: [null, [Validators.required]],
            apepaterno: [null, [Validators.required]],
            apematerno: [null, []],
            rfc: [null, [Validators.required]],
            curp: [null, [Validators.required]],
            ine: [null, []],
            idDocIdent: [&#x27;&#x27;, []],
            docIdent: [null, []],
            fecha_naci: [null, []],
            fecha_def: [null, []],
            celular: [null, []],
            email: [null, []],
        });

        this.moralFormGroup &#x3D; this._formBuilder.group({
            razonSocial: [null, [Validators.required]],
            rfc: [null, [Validators.required]],
            actPreponderante: [null, []],
            idTipoPersonaMoral: [&#x27;&#x27;, []],
            fechaInicioOperacion: [null, []],
            idMotivo: [&#x27;&#x27;, []],
            fechaCambio: [null, []],
        });

        this.idSociedad &#x3D; this.route.snapshot.paramMap.get(&#x27;idsociedad&#x27;);
        console.log(this.idSociedad);
        this.getSociedadDatos();
        this.getDomicilioSociedad();
        this.getRepresentacion();
        this.getRepresentado();
    }

    /** 
    * @param event El el parametro que se recibe para evaluar si se ha realizado un cambio en el tipo de la persona,
    *  el valor puede ser F de Física o M de moral.
    */    
    actualizaPersona(event){
        console.log(event)
        this.actCambioPersona &#x3D; (event &#x3D;&#x3D; this.cambioPersona) ? true : false;
        console.log(this.actCambioPersona);
        if(this.datosSociedad.tipoPersona &#x3D;&#x3D; &#x27;M&#x27;){
            this.datosSociedad.razonSocial &#x3D; this.datosSociedad.apaterno + &#x27; &#x27; + this.datosSociedad.amaterno + &#x27; &#x27; + this.datosSociedad.nombre;
        }
        this.datosSociedad.rfc &#x3D; null;
    }

    /**
     * Obtiene los datos identificativos y personales de la sociedad.
     */
    getSociedadDatos(){
        this.query &#x3D; &#x27;idSociedad&#x3D;&#x27; + this.idSociedad; 
        this.loading &#x3D; true;
        console.log(this.endpoint);
        this.http.post(this.endpoint + &#x27;?&#x27; + this.query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    //this.loading &#x3D; false;
                    this.dataSocedadResultado &#x3D; res[0];
                    console.log(&quot;AQUI ENTRO EL RES&quot;);
                    console.log(this.dataSocedadResultado);
                    this.getPeritosSociedad();
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Obtiene la información de los peritos asociados a la sociedad.
     */
    getPeritosSociedad(){
        this.http.post(this.endpointTable + &#x27;?&#x27; + &#x27;idSociedad&#x3D;&#x27; + this.idSociedad + &#x27;&amp;idPerito&#x27;, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataPaginate.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(&quot;RES PERITOS SOCIEDAD&quot;);
                    console.log(this.total);
                    this.datosDeLaSociedad();
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Guarda la nueva información de la sociedad ya sean sus datos personales o identificativos.
     */
    guardaSociedad(){
        let query &#x3D; &#x27;codtipospersona&#x3D;M&amp;nombre&#x3D;&#x27;;
        this.loading &#x3D; true;
        
        query &#x3D; (this.datosSociedad.acta) ? query + &#x27;&amp;activprincip&#x3D;&#x27; + this.datosSociedad.acta : query + &#x27;&amp;activprincip&#x3D;&#x27;;

        query &#x3D; (this.datosSociedad.tipoMoral) ? query + &#x27;&amp;idtipomoral&#x3D;&#x27; + this.datosSociedad.tipoMoral : query + &#x27;&amp;idtipomoral&#x3D;&#x27;;

        query &#x3D; (this.datosSociedad.motivoCambio) ? query + &#x27;&amp;idmotivosmoral&#x3D;&#x27; + this.datosSociedad.motivoCambio : query + &#x27;&amp;idmotivosmoral&#x3D;&#x27;;

        query &#x3D; (this.datosSociedad.fechaInicio) ? query + &#x27;&amp;fechainicioactiv&#x3D;&#x27; + moment(this.datosSociedad.fechaInicio).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechainicioactiv&#x3D;&#x27;;
        
        query &#x3D; (this.datosSociedad.fechaCambio) ? query + &#x27;&amp;fechacambiosituacion&#x3D;&#x27; + moment(this.datosSociedad.fechaCambio).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechacambiosituacion&#x3D;&#x27;;
        
        query &#x3D; (this.datosSociedad.rfc) ? query + &#x27;&amp;rfc&#x3D;&#x27; + this.datosSociedad.rfc : query + &#x27;&amp;rfc&#x3D;&#x27;;

        query &#x3D; (this.datosSociedad.razonSocial) ? query + &#x27;&amp;apellidopaterno&#x3D;&#x27; + this.datosSociedad.razonSocial : query + &#x27;&amp;apellidopaterno&#x3D;&#x27;;

        query &#x3D; query + &#x27;&amp;apellidomaterno&#x3D;&amp;curp&#x3D;&amp;claveife&#x3D;&amp;iddocidentif&#x3D;&amp;valdocidentif&#x3D;&amp;fechanacimiento&#x3D;&amp;fechadefuncion&#x3D;&amp;celular&#x3D;&amp;email&#x3D;&amp;idExpediente&#x27;;

        query &#x3D; query + &#x27;&amp;idpersona&#x3D;&#x27; + this.idSociedad;

        console.log(this.endpointActualiza + &#x27;actualizaContribuyente&#x27; + &#x27;?&#x27; + query);
        this.http.post(this.endpointActualiza + &#x27;actualizaContribuyente&#x27; + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    console.log(&quot;AQUI ACTUALIZO&quot;);
                    console.log(res);
                    this.snackBar.open(&#x27;guardado correcto&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /** 
    * Abre el dialogo que mostrarrá un mensaje de confirmación según sea el caso
    * @param evento Es el parametro que recibe el método para elegir en el switch que acción realizar.
    * @param element Pude ser un solo dato o un array dependiendo el metodo del swtich.
    * @param tipo Utilizado en el método de eliminarRepresentación para diferenciar entre un representante o representado
    * con valor de 1 y 2 respectivamente.
    */ 
    confirmaCambio(evento &#x3D; null, element &#x3D; null, tipo &#x3D; null): void {
        this.mensajeConfirma &#x3D; evento;
        console.log(this.mensajeConfirma);
        const dialogRef &#x3D; this.dialog.open(DialogConfirmacionComponent, {
            width: &#x27;700px&#x27;,
            data: this.mensajeConfirma
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                switch (this.mensajeConfirma) {
                    case 1:
                        this.cambiarTipoPersona();                        
                        break;
                    case 2:
                        this.eliminarPeritoSoicedad(element);
                        break;
                    case 3:
                        this.eliminarPeritoSoicedadTodos();
                        break;
                    case 4:
                        this.eliminarRepresentacion(element,tipo);
                        break;
                    default:
                        break;
                }
            }
        });
    }

    /**
     * Cambia el tipo de persona de Físca a Moral o viceversa.
     */
    cambiarTipoPersona(){
        let query &#x3D; &#x27;idpersona&#x3D;&#x27; + this.idSociedad;
        this.loading &#x3D; true;
        
        query &#x3D; (this.datosSociedad.tipoPersona) ? query + &#x27;&amp;codtipospersona&#x3D;&#x27; + this.datosSociedad.tipoPersona : query + &#x27;&amp;codtipospersona&#x3D;&#x27;;

        if(this.datosSociedad.tipoPersona &#x3D;&#x3D;&#x3D; &#x27;F&#x27;){
            query &#x3D; (this.datosSociedad.apaterno) ? query + &#x27;&amp;apellidopaterno&#x3D;&#x27; + this.datosSociedad.apaterno : query + &#x27;&amp;apellidopaterno&#x3D;&#x27;;
            query &#x3D; (this.datosSociedad.amaterno) ? query + &#x27;&amp;apellidomaterno&#x3D;&#x27; + this.datosSociedad.amaterno : query + &#x27;&amp;apellidomaterno&#x3D;&#x27;;
            query &#x3D; (this.datosSociedad.nombre) ? query + &#x27;&amp;nombreF&#x3D;&#x27; + this.datosSociedad.nombre : query + &#x27;&amp;nombreF&#x3D;&#x27;;
            query &#x3D; (this.datosSociedad.rfc) ? query + &#x27;&amp;rfcF&#x3D;&#x27; + this.datosSociedad.rfc : query + &#x27;&amp;rfcF&#x3D;&#x27;;
        } else {
            query &#x3D; (this.datosSociedad.razonSocial) ? query + &#x27;&amp;nombreM&#x3D;&#x27; + this.datosSociedad.razonSocial : query + &#x27;&amp;nombreM&#x3D;&#x27;;
            query &#x3D; (this.datosSociedad.rfc) ? query + &#x27;&amp;rfcM&#x3D;&#x27; + this.datosSociedad.rfc : query + &#x27;&amp;rfcM&#x3D;&#x27;;
        }
        
        query &#x3D; (this.datosSociedad.curp) ? query + &#x27;&amp;curp&#x3D;&#x27; + this.datosSociedad.curp : query + &#x27;&amp;curp&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.ine) ? query + &#x27;&amp;claveife&#x3D;&#x27; + this.datosSociedad.ine : query + &#x27;&amp;claveife&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.idDocIdent) ? query + &#x27;&amp;iddocidentif&#x3D;&#x27; + this.datosSociedad.idDocIdent : query + &#x27;&amp;iddocidentif&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.docIdent) ? query + &#x27;&amp;valdocidentif&#x3D;&#x27; + this.datosSociedad.docIdent : query + &#x27;&amp;valdocidentif&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.fechaNacimiento) ? query + &#x27;&amp;fechanacimiento&#x3D;&#x27; + moment(this.datosSociedad.fechaNacimiento).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechanacimiento&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.fechaDefuncion) ? query + &#x27;&amp;fechadefuncion&#x3D;&#x27; + moment(this.datosSociedad.fechaDefuncion).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechadefuncion&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.celular) ? query + &#x27;&amp;celular&#x3D;&#x27; + this.datosSociedad.celular : query + &#x27;&amp;celular&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.email) ? query + &#x27;&amp;email&#x3D;&#x27; + this.datosSociedad.email : query + &#x27;&amp;email&#x3D;&#x27;;

        query &#x3D; (this.datosSociedad.acta) ? query + &#x27;&amp;activprincip&#x3D;&#x27; + this.datosSociedad.acta : query + &#x27;&amp;activprincip&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.tipoMoral) ? query + &#x27;&amp;idtipomoral&#x3D;&#x27; + this.datosSociedad.tipoMoral : query + &#x27;&amp;idtipomoral&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.motivoCambio) ? query + &#x27;&amp;idmotivosmoral&#x3D;&#x27; + this.datosSociedad.motivoCambio : query + &#x27;&amp;idmotivosmoral&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.fechaInicio) ? query + &#x27;&amp;fechainicioactiv&#x3D;&#x27; + moment(this.datosSociedad.fechaInicio).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechainicioactiv&#x3D;&#x27;;
        query &#x3D; (this.datosSociedad.fechaCambio) ? query + &#x27;&amp;fechacambiosituacion&#x3D;&#x27; + moment(this.datosSociedad.fechaCambio).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechacambiosituacion&#x3D;&#x27;;

        this.http.post(this.endpointActualiza + &#x27;cambioTipoPersona&#x27; + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
        .subscribe(
            (res: any) &#x3D;&gt; {
                this.loading &#x3D; false;
                console.log(&quot;Cambio de persona&quot;);
                console.log(res);
                if(res){
                    this.snackBar.open(&#x27;Actualización correcta&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }else{
                    this.snackBar.open(&#x27;Se ha presentado un problema intente más tarde&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            },
            (error) &#x3D;&gt; {
                this.loading &#x3D; false;
                this.snackBar.open(&#x27;Se ha presentado un problema intente más tarde&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            }
        );
    }

    /**
     * Almacena los valores recibidos de la consulta realizada.
     */
    datosDeLaSociedad(){
        this.cambioPersona &#x3D; this.dataSocedadResultado.CODTIPOSPERSONA;
        this.datosSociedad.tipoPersona &#x3D; this.dataSocedadResultado.CODTIPOSPERSONA;
        this.datosSociedad.razonSocial  &#x3D; this.dataSocedadResultado.RAZONSOCIAL;
        this.datosSociedad.rfc &#x3D; this.dataSocedadResultado.RFC;
        this.datosSociedad.registro &#x3D; this.dataSocedadResultado.REGISTRO;
        this.datosSociedad.fecha_alta &#x3D; (this.dataSocedadResultado.FECHAALTA) ? new Date(this.dataSocedadResultado.FECHAALTA) : null;
        this.datosSociedad.fecha_baja &#x3D; (this.dataSocedadResultado.FECHABAJA) ? new Date(this.dataSocedadResultado.FECHABAJA) : null;
        this.datosSociedad.acta &#x3D; this.dataSocedadResultado.ACTIVPRINCIP;
        this.datosSociedad.fechaInicio &#x3D; (this.dataSocedadResultado.FECHAINICIOACTIV) ? new Date(this.dataSocedadResultado.FECHAINICIOACTIV) : null;
        this.datosSociedad.fechaCambio &#x3D; (this.dataSocedadResultado.FECHACAMBIOSITUACION) ? new Date(this.dataSocedadResultado.FECHACAMBIOSITUACION) : null;
        this.datosSociedad.tipoMoral &#x3D; this.dataSocedadResultado.IDTIPOMORAL;
        this.datosSociedad.motivoCambio &#x3D; this.dataSocedadResultado.IDMOTIVOSMORAL;

    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataSource &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * Regresa la posición del paginado de acuerdo a los parámetro enviados
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    /**
     * Actualiza los datos correspondientes a la Sociedad.
     */
    actualizaSociedad(){
        let query &#x3D; &#x27;&#x27;;

        query &#x3D; &#x27;idPersona&#x3D;&#x27; + this.idSociedad;

        query &#x3D; ( this.datosSociedad.registro ) ? query + &#x27;&amp;registro&#x3D;&#x27; + this.datosSociedad.registro : query + &#x27;&amp;registro&#x3D;&#x27;;
        
        query &#x3D; (this.datosSociedad.fecha_alta) ? query + &#x27;&amp;fechaAlta&#x3D;&#x27; + moment(this.datosSociedad.fecha_alta).format(&#x27;DD-MM-YYYY&#x27;)
                                                : query + &#x27;&amp;fechaAlta&#x3D;&#x27;;

        query &#x3D; (this.datosSociedad.fecha_baja) ? query + &#x27;&amp;fechaBaja&#x3D;&#x27; + moment(this.datosSociedad.fecha_baja).format(&#x27;DD-MM-YYYY&#x27;)
                                                : query + &#x27;&amp;fechaBaja&#x3D;&#x27;;

        console.log(this.endpointActualiza + &#x27;actualizarSociedad&#x27; + &#x27;?&#x27; + query);
        this.http.post(this.endpointActualiza + &#x27;actualizarSociedad&#x27; + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(res);
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Obtiene los domicilios registrados de la sociedad domicilios particulares y para recibir notificaciones.
     */
    getDomicilioSociedad(){
        this.loadingDomicilios &#x3D; true;
        let metodo &#x3D; &#x27;getDireccionesContribuyente&#x27;;
        this.http.post(this.endpointActualiza + metodo + &#x27;?idPersona&#x3D;&#x27;+ this.idSociedad, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingDomicilios &#x3D; false;

                    this.dataSource1 &#x3D; res.filter(element &#x3D;&gt; element.CODTIPOSDIRECCION !&#x3D;&#x3D; &quot;N&quot;);
                    this.dataSource2 &#x3D; res.filter(element &#x3D;&gt; element.CODTIPOSDIRECCION &#x3D;&#x3D;&#x3D; &quot;N&quot;);
                    this.total1 &#x3D; this.dataSource1.length;
                    this.total2 &#x3D; this.dataSource2.length;
                    this.dataPaginate1 &#x3D; this.paginate(this.dataSource1, 15, this.pagina1);
                    this.dataPaginate2 &#x3D; this.paginate(this.dataSource2, 15, this.pagina2);
                },
                (error) &#x3D;&gt; {
                    this.loadingDomicilios &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * 
     * @param iddireccion Valor del id para obtener el registro del domicilio registrado
     */
    getDireccionEspecifica(iddireccion){
        this.loadingDireccionEspecifica &#x3D; true;
        let metodo &#x3D; &#x27;getDireccionById&#x27;;
        this.http.post(this.endpointActualiza + metodo + &#x27;?idDireccion&#x3D;&#x27;+ iddireccion, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingDireccionEspecifica &#x3D; false;
                    this.dataDomicilioEspecifico &#x3D; res;
                    this.editDomicilio(this.dataDomicilioEspecifico);
                    console.log(&#x27;domicilio único encontrado 319&#x27;);
                    console.log(this.dataDomicilioEspecifico);
                },
                (error) &#x3D;&gt; {
                    this.loadingDireccionEspecifica &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado1(evt): void{
        this.pagina1 &#x3D; evt.pageIndex + 1;
        this.dataSource1 &#x3D; this.paginate(this.dataSource1, 15, this.pagina1);
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado2(evt): void{
        this.pagina1 &#x3D; evt.pageIndex + 1;
        this.dataSource1 &#x3D; this.paginate(this.dataSource1, 15, this.pagina1);
    }

    /**
     * Abre el dialogo que registrara un nuevo domicilio
     */
    addDomicilio(): void {
      let codtiposdireccion &#x3D; &#x27;&#x27;;
      const dialogRef &#x3D; this.dialog.open(DialogDomicilioSociedad, {
          width: &#x27;700px&#x27;,
          data: {idSociedad: this.idSociedad,
                  codtiposdireccion: codtiposdireccion
          },
      });
      dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
              this.getDomicilioSociedad();
      });
    }

    /**
     * Abre el dialogo que nos permitira ver el historial de los domicilios
     * @param idDireccion Valor del idDirección de la cual se obtendran los registros de los domicilios de la representación
     */
    viewHistoricoDomicilio(idDireccion): void {
        const dialogRef &#x3D; this.dialog.open(DialogDomicilioHistoricoSociedad, {
            width: &#x27;700px&#x27;,
            data: {idDireccion},
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {

        });
    }

    /**
     * Abre el dialogo que registrara un nuevo domicilio con notificación
     */
    addDomicilioBoleta(): void {
        let codtiposdireccion &#x3D; &#x27;N&#x27;;
        const dialogRef &#x3D; this.dialog.open(DialogDomicilioSociedad, {
            width: &#x27;700px&#x27;,
            data: {idSociedad: this.idSociedad,
                codtiposdireccion: codtiposdireccion 
            },
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            this.getDomicilioSociedad();
        });
    }

    /**
     * 
     * @param dataDomicilioEspecifico Valor que se enviará para la obtención del registro a editar.
     */
    editDomicilio(dataDomicilioEspecifico): void {
        let codtiposdireccion &#x3D; &#x27;&#x27;;
            const dialogRef &#x3D; this.dialog.open(DialogDomicilioSociedad, {
                width: &#x27;700px&#x27;,
                data: {dataDomicilioEspecifico:dataDomicilioEspecifico, idNotario: this.idSociedad},
            });
            dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
                    this.getDomicilioSociedad();
            });
    }

    /**
     * Abre el dialog que realizará la busqueda de la sociedad existente
     */
    buscarSociedadPersona(){
        const dialogRef &#x3D; this.dialog.open(DialogBuscaSociedad, {
            width: &#x27;700px&#x27;,
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                console.log(&quot;RESULTADO DEL NUEVO NOMBRE SOCIEDAD&quot;);
                console.log(result);
                console.log(result.apepaterno);
                this.datosSociedad.razonSocial &#x3D; result.razonSocial;
                this.datosSociedad.rfc &#x3D; result.rfc;
                this.datosSociedad.acta &#x3D; result.acta;
                this.datosSociedad.tipoMoral &#x3D; result.tipoMoral;
                this.datosSociedad.fechaInicio &#x3D; result.fechaInicio;
                this.datosSociedad.motivoCambio &#x3D; result.motivoCambio;
                this.datosSociedad.fechaCambio &#x3D; result.fechaCambio;
                this.datosSociedad.registro &#x3D; result.registro;
                this.datosSociedad.fecha_alta &#x3D; result.fecha_alta;
                this.datosSociedad.fecha_baja &#x3D; result.fecha_baja;
                this.botonEdit &#x3D; false;
                document.getElementById(&quot;apepaterno&quot;).focus();
            }
        });
    }
    /**
     * Limpia los datos de la sociedad consultada
     */
    cleanSociedad(){
        this.datosSociedad.razonSocial &#x3D; null;
        this.datosSociedad.rfc &#x3D; null;
        this.datosSociedad.acta &#x3D; null;
        this.datosSociedad.tipoMoral &#x3D; null;
        this.datosSociedad.fechaInicio &#x3D; null;
        this.datosSociedad.motivoCambio &#x3D; null;
        this.datosSociedad.fechaCambio &#x3D; null;
        this.datosSociedad.registro &#x3D; null;
        this.datosSociedad.fecha_alta &#x3D; null;
        this.datosSociedad.fecha_baja &#x3D; null;
        this.botonEdit &#x3D; true;
    }

    /**
     * 
     * @param dataRepresentante Arreglo de los datos de la representación seleccionada
     */
    addRepresentante(dataRepresentante &#x3D; null): void {
        const dialogRef &#x3D; this.dialog.open(DialogRepresentacionSociedad, {
            width: &#x27;700px&#x27;,
            data: {dataRepresentante : dataRepresentante,
                    datosSociedad : this.datosSociedad,
                    idSociedad : this.idSociedad
            },
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                setTimeout (() &#x3D;&gt; {
                    this.loadingRepresentante &#x3D; true;
                    this.getRepresentacion();
                }, 1000);
            }
        });
    }

    /**
     * 
     * @param dataRepresentante Arreglo de los datos de la representación seleccionada
     */
    addRepresentado(dataRepresentante &#x3D; null): void {
        const dialogRef &#x3D; this.dialog.open(DialogRepresentadoSociedad, {
            width: &#x27;700px&#x27;,
            data: {dataRepresentante : dataRepresentante,
                    datosSociedad: this.datosSociedad,
                    idSociedad : this.idSociedad
            },
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                setTimeout (() &#x3D;&gt; {
                    this.loadingRepresentado &#x3D; true;
                    this.getRepresentado();
                }, 1000);
            }
        });
    }

    /**
     * 
     * @param element Datos de la representación a eliminar
     * @param tipo Valor del tipo de representación de acuerdo al valor seleccionara el método correspondiente.
     */
    eliminarRepresentacion(element,tipo){
        let queryDelRep &#x3D; &#x27;idRepresentacion&#x3D;&#x27; + element.IDREPRESENTACION;
        console.log(element);
        console.log(this.endpointActualiza + &#x27;deleteRepresentacion?&#x27; + queryDelRep);
        this.http.post(this.endpointActualiza + &#x27;deleteRepresentacion?&#x27; + queryDelRep, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    console.log(&quot;ELIMINADO&quot;);
                    console.log(res);
                    if(res){
                        if(tipo &#x3D;&#x3D; 1){
                            this.getRepresentacion();
                        }else{
                            this.getRepresentado();
                        }
                        this.snackBar.open(&quot;Se ha eliminado la representación&quot;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                        
                    }else{
                        this.snackBar.open(&quot;Ocorrio un error al eliminar, intentelo nuevamente&quot;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                    }
                },
                (error) &#x3D;&gt; {
                    this.snackBar.open(&quot;Ocorrio un error al eliminar, intentelo nuevamente&quot;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    getRepresentacion(){
        this.loadingRepresentante &#x3D; true;
        let queryRep &#x3D; &#x27;rep&#x3D;Representantes&amp;idPersona&#x3D;&#x27; + this.idSociedad;
        this.http.post(this.endpointActualiza + &#x27;getRepresentacionContribuyente?&#x27; + queryRep, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingRepresentante &#x3D; false;
                    this.dataSource4 &#x3D; res;
                    this.total4 &#x3D; this.dataSource4.length;
                    this.dataPaginate4 &#x3D; this.paginate(this.dataSource4, 15, this.pagina4);
                },
                (error) &#x3D;&gt; {
                    this.loadingRepresentante &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado4(evt): void{
        this.pagina4 &#x3D; evt.pageIndex + 1;
        this.dataSource4 &#x3D; this.paginate(this.dataSource4, 15, this.pagina4);
    }

    getRepresentado(){
        this.loadingRepresentado &#x3D; true;
        let queryRepdo &#x3D; &#x27;rep&#x3D;Representado&amp;idPersona&#x3D;&#x27; + this.idSociedad;
        console.log(this.endpointActualiza + &#x27;getRepresentacionContribuyente?&#x27; + queryRepdo);
        this.http.post(this.endpointActualiza + &#x27;getRepresentacionContribuyente?&#x27; + queryRepdo, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingRepresentado &#x3D; false;
                    this.dataSource5 &#x3D; res;
                    console.log(&quot;ACA ENTRO EL REPRESENTADO&quot;);
                    console.log(res);
                    this.total5 &#x3D; this.dataSource5.length;
                    this.dataPaginate5 &#x3D; this.paginate(this.dataSource5, 15, this.pagina5);
                },
                (error) &#x3D;&gt; {
                    this.loadingRepresentado &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado5(evt): void{
        this.pagina5 &#x3D; evt.pageIndex + 1;
        this.dataSource5 &#x3D; this.paginate(this.dataSource5, 15, this.pagina5);
    }

    ///////////////////////////// DATOS PERITOS - SOCIEDAD //////////////////////////
    buscarPeritoPersona(){
        const dialogRef &#x3D; this.dialog.open(DialogSociedadPerito, {
            width: &#x27;700px&#x27;,
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                console.log(&quot;RESULTADO DEL NUEVO NOMBRE&quot;);
                console.log(result);
                console.log(result.apepaterno);
                this.idPeritoD &#x3D; result.idperito;
                this.botonEdit &#x3D; false;
                this.insertaPeritoSociedad();
            }
        });
    }

    insertaPeritoSociedad(){
        this.loading &#x3D; true;
        let queryPS &#x3D; &#x27;idPersona&#x3D;&#x27; + this.idPeritoD + &#x27;&amp;idSociedad&#x3D;&#x27; + this.idSociedad;
        this.http.post(this.endpointActualiza + &#x27;insertarPeritoSoci?&#x27; + queryPS, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    console.log(res);
                    if(res){
                        this.snackBar.open(&quot;Se ha registrado correctamente&quot;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                        this.getPeritosSociedad();
                    }else{
                        this.snackBar.open(&quot;Ha ocurrido un problema, intentelo más tarde&quot;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                    }
                },
                (error) &#x3D;&gt; {
                    this.loadingDatosPerito &#x3D; false;
                    this.snackBar.open(&quot;Ha ocurrido un problema, intentelo más tarde&quot;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );     
    }

    /**
     * 
     * @param element Datos del registro seleccionado.
     */
    eliminarPeritoSoicedad(element){
        this.loading &#x3D; true;
        let peritoId &#x3D; element.idperito;
        console.log(element);
        let queryEPS &#x3D; &#x27;idPersona&#x3D;&#x27; + peritoId + &#x27;&amp;idSociedad&#x3D;&#x27; + element.idsociedad;
        this.http.post(this.endpointActualiza + &#x27;borrarPeritoSoci&#x27; + &#x27;?&#x27; + queryEPS, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    if(res){
                        this.snackBar.open(&quot;Se ha eliminado correctamente&quot;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                        this.getPeritosSociedad();
                    }else{
                        this.snackBar.open(&quot;Ha ocurrido un problema, intentelo más tarde&quot;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                    }
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                }
            );
    }

    eliminarPeritoSoicedadTodos(){
        this.loadingDatosPerito &#x3D; true;
        let queryEPS &#x3D; &#x27;idPersona&#x3D;&#x27; + this.idSociedad;
        this.http.post(this.endpointActualiza + &#x27;borrarPeritoSociTodos&#x27; + &#x27;?&#x27; + queryEPS, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    //this.loadingDatosPerito &#x3D; false;
                    console.log(res);
                    //this.getPeritoDatos();
                },
                (error) &#x3D;&gt; {
                    this.loadingDatosPerito &#x3D; false;
                }
            );
    }

    historialRepresentacion(){
        const dialogRef &#x3D; this.dialog.open(DialogHistorialRepS, {
            width: &#x27;700px&#x27;,
            data: this.idSociedad,
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                setTimeout (() &#x3D;&gt; {
                    
                }, 1000);
            }
        });
    }
}

///////////////BUSCAR PERSONA MORAL////////////////
export interface DatosSociedadPersona {
    razonSocial: string;
    rfc: string;
    acta: string;
    tipoMoral: string;
    fechaInicio: string;
    motivoCambio: string;
    fechaCambio: string;
    registro: string;
    fecha_alta: Date;
    fecha_baja: Date;
    idSociedad: number;
}
@Component({
    selector: &#x27;app-dialog-buscaSociedad&#x27;,
    templateUrl: &#x27;app-dialog-buscaSociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogBuscaSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;razon&#x27;,&#x27;registro&#x27;, &#x27;rfc&#x27;, &#x27;select&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    loading &#x3D; false;
    dataSource &#x3D; [];
    dataPaginate &#x3D; [];
    httpOptions;
    razonSocial;
    rfc;
    registro;
    search;
    isIdentificativo;
    idSociedad;
    optionSociedadPersona;
    datosSociedadPersona: DatosSociedadPersona &#x3D; {} as DatosSociedadPersona;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;

    constructor(
        private auth: AuthService,
        private http: HttpClient,
        private snackBar: MatSnackBar,
        private _formBuilder: FormBuilder,
        public dialogRef: MatDialogRef&lt;DialogBuscaSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any){
            dialogRef.disableClose &#x3D; true;
            this.httpOptions &#x3D; {
                headers: new HttpHeaders({
                    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                    Authorization: this.auth.getSession().token
                })
            };
    }

    cleanBusca(): void{
        this.loading &#x3D; false;
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.pageSize &#x3D; 15;
        this.dataSource &#x3D; [];
        this.dataPaginate;
    }

    validateSearch(){
        this.search &#x3D; (
            this.razonSocial ||
            this.rfc ||
            this.registro
        ) ? true : false;
    }

    /**
     * 
     * @param isIdentificativo Valor que nos indica que campos utilizaremos para realizar la busqueda
     */
    clearInputsIdentNoIdent(isIdentificativo): void {
        this.isIdentificativo &#x3D; isIdentificativo;
        if(this.isIdentificativo){
            this.razonSocial &#x3D; null;
        }else{
            this.rfc &#x3D; null;
            this.registro &#x3D; null;
        }
    }

    getSociedad(){
        let query &#x3D; &#x27;&#x27;;
        let busquedaDatos &#x3D; &#x27;&#x27;;
        if( this.razonSocial ){
            busquedaDatos &#x3D; busquedaDatos + &#x27;getSocValuacionByDatosPersonales&#x27;;
        }else{
            busquedaDatos &#x3D; busquedaDatos + &#x27;getSocValuacionByDatosIdentificativos&#x27;;
        }

        if( this.razonSocial ){
            query &#x3D; query + &#x27;&amp;razonSocial&#x3D;&#x27; + this.razonSocial + &#x27;&amp;filtroRazon&#x3D;1&#x27;;
        }
        if(this.rfc){
            query &#x3D; query + &#x27;&amp;rfc&#x3D;&#x27; + this.rfc;
        }
        if(this.registro){
            query &#x3D; query + &#x27;&amp;registro&#x3D;&#x27; + this.registro;
        }

        query &#x3D; query.substr(1);

        this.loading &#x3D; true;
        console.log(this.endpoint);
        this.http.post(this.endpoint + busquedaDatos + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(res);
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    /**
     * 
     * @param element Arrglo de los datos del registro seleccionado
     */
    sociedadPersonaSelected(element){
        console.log(element);
        this.datosSociedadPersona.idSociedad &#x3D; element.IDSOCIEDAD;
        this.datosSociedadPersona.razonSocial &#x3D; element.RAZONSOCIAL;
        this.datosSociedadPersona.rfc &#x3D; element.RFC;
        this.datosSociedadPersona.acta &#x3D; element.ACTIVPRINCIP;
        this.datosSociedadPersona.tipoMoral &#x3D; element.TIPOMORAL;
        this.datosSociedadPersona.fechaInicio &#x3D; element.FECHAINICIOACTIV;
        this.datosSociedadPersona.motivoCambio &#x3D; element.IDMOTIVOSMORAL;
        this.datosSociedadPersona.fechaCambio &#x3D; element.FECHACAMBIOSITUACION;
        this.datosSociedadPersona.registro &#x3D; element.REGISTRO;
        this.datosSociedadPersona.fecha_alta &#x3D; element.FECHAALTA;
        this.datosSociedadPersona.fecha_baja &#x3D; element.FECHABAJA;
    }
}

///////////////DOMICILIO////////////////
@Component({
    selector: &#x27;app-dialog-domicilio-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-domicilio-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogDomicilioSociedad {
    endpointCatalogos &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    //loadingTiposDireccion &#x3D; false;
    loadingEstados &#x3D; false;
    loadingMunicipios &#x3D; false;
    loadingTiposAsentamiento &#x3D; false;
    loadingTiposVia &#x3D; false;
    loadingTiposLocalidad &#x3D; false;
    httpOptions;
    tiposDireccion;
    estados;
    municipios;
    tiposAsentamiento;
    tiposVia;
    tiposLocalidad;
    optionCiudad;
    codtiposdireccion;
    idestadoNg
    idmunicipioNg
    idmunicipio2Ng
    municipioNg
    idciudadNg
    ciudadNg
    codasentamientoNg
    asentamientoNg
    idtipoasentamientoNg
    cpNg
    codtiposviaNg
    idtipoviaNg
    viaNg
    idtipolocalidadNg
    nexteriorNg
    entrecalle1Ng
    entrecalle2Ng
    andadorNg
    edificioNg
    seccionNg
    entradaNg
    ninteriorNg
    telefonoNg
    adicionalNg
    botonAsentamiento &#x3D; true;
    botonCiudad &#x3D; true;
    botonMunicipio &#x3D; true;
    botonVia &#x3D; true;
    buscaMunicipios;
    domicilioFormGroup: FormGroup;
    dataDomicilio: DataDomicilio &#x3D; {} as DataDomicilio;
    dataDomicilioEspecifico: DataDomicilio &#x3D; {} as DataDomicilio;
    loadingDireccionEspecifica &#x3D; false;
    iddomicilio;
    iddireccion;

    constructor(
        private auth: AuthService,
        private snackBar: MatSnackBar,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialogRef: MatDialogRef&lt;DialogDomicilioSociedad&gt;,
        public dialog: MatDialog,
        @Inject(MAT_DIALOG_DATA) public data: any) {
            console.log(data);
            dialogRef.disableClose &#x3D; true;
            this.httpOptions &#x3D; {
                headers: new HttpHeaders({
                    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                    Authorization: this.auth.getSession().token
                })
            };
  
            this.iddireccion &#x3D; data.dataDomicilioEspecifico;
            this.codtiposdireccion &#x3D; data.codtiposdireccion;
            this.dataDomicilio &#x3D; {} as DataDomicilio;
            this.dataDomicilioEspecifico &#x3D; {} as DataDomicilio;
            this.getDataEstados();
            this.getDireccionEspecifica();
            
            this.domicilioFormGroup &#x3D; this._formBuilder.group({
                //idtipodireccion: [&#x27;&#x27;, Validators.required],
                idestado: [&#x27;&#x27;, Validators.required],
                delegacion: [null],
                municipio: [null, Validators.required],
                idciudad: [null],
                ciudad: [null, Validators.required],
                codasentamiento: [null, Validators.required],
                asentamiento: [null, Validators.required],
                idtipoasentamiento: [null],
                codtiposvia: [null],
                idtipovia: [&#x27;&#x27;, Validators.required],
                via: [null, Validators.required],
                idtipolocalidad: [null],
                cp: [null],
                nexterior: [null, Validators.required],
                entrecalle1: [null],
                entrecalle2: [null],
                andador: [null],
                edificio: [null],
                seccion: [null],
                entrada: [null],
                ninterior: [null],
                telefono: [null],
                adicional: [null],
                id_direccion: [null]
            });
    
            this.domicilioFormGroup.controls.idestado.valueChanges.subscribe(idestado &#x3D;&gt; {
                if(idestado &#x3D;&#x3D; 9) {
                    this.domicilioFormGroup.removeControl(&#x27;municipio&#x27;);
                    this.domicilioFormGroup.removeControl(&#x27;idciudad&#x27;);
                    this.domicilioFormGroup.removeControl(&#x27;ciudad&#x27;);
                    this.domicilioFormGroup.addControl(&#x27;idmunicipio&#x27;, new FormControl(&#x27;&#x27;, Validators.required));
                    this.domicilioFormGroup.removeControl(&#x27;idmunicipio2&#x27;);
                } else {
                    this.domicilioFormGroup.removeControl(&#x27;idmunicipio&#x27;);
                    this.domicilioFormGroup.addControl(&#x27;municipio&#x27;, new FormControl(null, Validators.required));
                    this.domicilioFormGroup.addControl(&#x27;idciudad&#x27;, new FormControl(null, Validators.required));
                    this.domicilioFormGroup.addControl(&#x27;ciudad&#x27;, new FormControl(null, Validators.required));
                    this.domicilioFormGroup.addControl(&#x27;idmunicipio2&#x27;, new FormControl(&#x27;&#x27;, Validators.required));
                }
                this.domicilioFormGroup.updateValueAndValidity();
            });
    
            if(data){
                console.log(data.dataDomicilioEspecifico);
                console.log(&quot;recibimos data seteado1&quot;);
                // this.setDataDomicilio(data);
            }
            this.getDataTiposAsentamiento();
            this.getDataTiposVia();
            this.getDataTiposLocalidad();
        }

    getDireccionEspecifica(){
        this.loadingDireccionEspecifica &#x3D; true;
        let metodo &#x3D; &#x27;getDireccionById&#x27;;
        this.http.post(this.endpointCatalogos + metodo + &#x27;?idDireccion&#x3D;&#x27;+ this.iddireccion, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingDireccionEspecifica &#x3D; false;
                    this.dataDomicilioEspecifico &#x3D; res;
                    this.setDataDomicilio(this.dataDomicilioEspecifico[0]);
                    console.log(&#x27;domicilio único encontrado&#x27;);
                    console.log(this.dataDomicilioEspecifico);
                },
                (error) &#x3D;&gt; {
                    this.loadingDireccionEspecifica &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }
    
    /**
     * 
     * @param event Obtiene el nombre de acuerdo al valor seleccionado en el select
     */
    getNombreDel(event): void {
        this.dataDomicilio.delegacion &#x3D; event.source.triggerValue;
        this.botonAsentamiento &#x3D; false;
    }
  
    /**
     * Obtiene el catálogo de estados de la república mexicana. 
     */
    getDataEstados(): void {
        this.loadingEstados &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getEstados&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingEstados &#x3D; false;
                this.estados &#x3D; res;
            },
            (error) &#x3D;&gt; {
                this.loadingEstados &#x3D; false;
            }
        );
    }

    /**
     * 
     * @param event Valor que se recibe para la obtención de las alcaldias o municipios.
     */
    getDataMunicipios(event): void {
        this.botonMunicipio &#x3D; false;
        let busquedaMunCol &#x3D; &#x27;&#x27;;
        busquedaMunCol &#x3D; (event.value &#x3D;&#x3D; 9) ? &#x27;getDelegaciones&#x27; : &#x27;getMunicipiosByEstado?codEstado&#x3D;&#x27; + event.value;
        this.loadingMunicipios &#x3D; true;
        this.http.post(this.endpointCatalogos + busquedaMunCol, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingMunicipios &#x3D; false;
                this.municipios &#x3D; res;
                console.log(&#x27;GETDELEG&#x27;);
                console.log(res);
            },
            (error) &#x3D;&gt; {
                this.loadingMunicipios &#x3D; false;
            }
        );
    }
    
    getDataTiposAsentamiento(): void {
        this.loadingTiposAsentamiento &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getTiposAsentamiento&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingTiposAsentamiento &#x3D; false;
                this.tiposAsentamiento &#x3D; res;
                console.log(&#x27;AQUI EL ASENTAMIENTO SELECT&#x27;);
                console.log(this.tiposAsentamiento);
            },
            (error) &#x3D;&gt; {
                this.loadingTiposAsentamiento &#x3D; false;
            }
        );
    }
  
    getDataTiposVia(): void {
        this.loadingTiposVia &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getTiposVia&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingTiposVia &#x3D; false;
                this.tiposVia &#x3D; res;
                console.log(&#x27;AQUI EL TIPOS VIA SELECT&#x27;);
                console.log(this.tiposVia);
                console.log(this.codtiposdireccion);
            },
            (error) &#x3D;&gt; {
                this.loadingTiposVia &#x3D; false;
            }
        );
    }
  
    getDataTiposLocalidad(): void {
        this.loadingTiposLocalidad &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getTiposLocalidad&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingTiposLocalidad &#x3D; false;
                this.tiposLocalidad &#x3D; res;
                console.log(&#x27;AQUI EL TIPOS LOCALIDAD&#x27;);
                console.log(this.tiposLocalidad);
            },
            (error) &#x3D;&gt; {
                this.loadingTiposLocalidad &#x3D; false;
            }
        );
    }
  
    getDataDomicilio(): void {
        //this.dataDomicilio.idtipodireccion &#x3D; this.domicilioFormGroup.value.idtipodireccion;
        this.dataDomicilio.idestado &#x3D; this.domicilioFormGroup.value.idestado;
        this.dataDomicilio.codasentamiento &#x3D; this.domicilioFormGroup.value.codasentamiento;
        this.dataDomicilio.idtipoasentamiento &#x3D; this.domicilioFormGroup.value.idtipoasentamiento;
        this.dataDomicilio.asentamiento &#x3D; (this.domicilioFormGroup.value.asentamiento) ? this.domicilioFormGroup.value.asentamiento : null;
        this.dataDomicilio.codtiposvia &#x3D; (this.domicilioFormGroup.value.codtiposvia) ? this.domicilioFormGroup.value.codtiposvia : null;
        this.dataDomicilio.idtipovia &#x3D; this.domicilioFormGroup.value.idtipovia;
        this.dataDomicilio.via &#x3D; (this.domicilioFormGroup.value.via) ? this.domicilioFormGroup.value.via : null;
        this.dataDomicilio.idtipolocalidad &#x3D; this.domicilioFormGroup.value.idtipolocalidad;
        this.dataDomicilio.cp &#x3D; (this.domicilioFormGroup.value.cp) ? this.domicilioFormGroup.value.cp : null;
        this.dataDomicilio.nexterior &#x3D; (this.domicilioFormGroup.value.nexterior) ? this.domicilioFormGroup.value.nexterior : null;
        this.dataDomicilio.entrecalle1 &#x3D; (this.domicilioFormGroup.value.entrecalle1) ? this.domicilioFormGroup.value.entrecalle1 : null;
        this.dataDomicilio.entrecalle2 &#x3D; (this.domicilioFormGroup.value.entrecalle2) ? this.domicilioFormGroup.value.entrecalle2 : null;
        this.dataDomicilio.andador &#x3D; (this.domicilioFormGroup.value.andador) ? this.domicilioFormGroup.value.andador : null;
        this.dataDomicilio.edificio &#x3D; (this.domicilioFormGroup.value.edificio) ? this.domicilioFormGroup.value.edificio : null;
        this.dataDomicilio.seccion &#x3D; (this.domicilioFormGroup.value.seccion) ? this.domicilioFormGroup.value.seccion : null;
        this.dataDomicilio.entrada &#x3D; (this.domicilioFormGroup.value.entrada) ? this.domicilioFormGroup.value.entrada : null;
        this.dataDomicilio.ninterior &#x3D; (this.domicilioFormGroup.value.ninterior) ? this.domicilioFormGroup.value.ninterior : null;
        this.dataDomicilio.telefono &#x3D; (this.domicilioFormGroup.value.telefono) ? this.domicilioFormGroup.value.telefono : null;
        this.dataDomicilio.adicional &#x3D; (this.domicilioFormGroup.value.adicional) ? this.domicilioFormGroup.value.adicional : null;

        this.dataDomicilio.id_direccion &#x3D; (this.domicilioFormGroup.value.id_direccion) ? this.domicilioFormGroup.value.id_direccion : null;
        
        if(this.domicilioFormGroup.value.idestado &#x3D;&#x3D; 9){
            this.dataDomicilio.idmunicipio &#x3D; this.domicilioFormGroup.value.idmunicipio;
            // alert(this.dataDomicilio.idmunicipio);
            //this.dataDomicilio.delegacion &#x3D; this.domicilioFormGroup.value.delegacion;
        } else {
            this.dataDomicilio.idmunicipio2 &#x3D; this.domicilioFormGroup.value.idmunicipio2;
            this.dataDomicilio.municipio &#x3D; (this.domicilioFormGroup.value.municipio) ? this.domicilioFormGroup.value.municipio : null;
            this.dataDomicilio.ciudad &#x3D; (this.domicilioFormGroup.value.ciudad) ? this.domicilioFormGroup.value.ciudad : null;
            this.dataDomicilio.idciudad &#x3D; (this.domicilioFormGroup.value.idciudad) ? this.domicilioFormGroup.value.idciudad : null;
        }


        if(this.domicilioFormGroup.value.id_direccion &#x3D;&#x3D; null){
                this.guardaDomicilio();
        } else{
                this.actualizarDomicilio();
        }

    }

    /**
     * Guarda el registro del nuevo domicilio.
     */
    guardaDomicilio(){
        
        let query &#x3D; &#x27;insertarDireccion?idPersona&#x3D;&#x27; + this.data.idSociedad;
  
        query &#x3D; (this.dataDomicilio.codtiposvia) ? query + &#x27;&amp;codtiposvia&#x3D;&#x27; + this.dataDomicilio.codtiposvia : query + &#x27;&amp;codtiposvia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idtipovia) ? query + &#x27;&amp;idvia&#x3D;&#x27; + this.dataDomicilio.idtipovia : query + &#x27;&amp;idvia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.via) ? query + &#x27;&amp;via&#x3D;&#x27; + this.dataDomicilio.via : query + &#x27;&amp;via&#x3D;&#x27;;
  
        query &#x3D; (this.dataDomicilio.nexterior) ? query + &#x27;&amp;numeroexterior&#x3D;&#x27; + this.dataDomicilio.nexterior : query + &#x27;&amp;numeroexterior&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.entrecalle1) ? query + &#x27;&amp;entrecalle1&#x3D;&#x27;  + this.dataDomicilio.entrecalle1 : query + &#x27;&amp;entrecalle1&#x27;;
        query &#x3D; (this.dataDomicilio.entrecalle2) ? query + &#x27;&amp;entrecalle2&#x3D;&#x27;  + this.dataDomicilio.entrecalle2 : query + &#x27;&amp;entrecalle2&#x27;;
        query &#x3D; (this.dataDomicilio.andador) ? query + &#x27;&amp;andador&#x3D;&#x27; + this.dataDomicilio.andador : query + &#x27;&amp;andador&#x27;;
        query &#x3D; (this.dataDomicilio.edificio) ? query + &#x27;&amp;edificio&#x3D;&#x27; + this.dataDomicilio.edificio : query + &#x27;&amp;edificio&#x27;;
        query &#x3D; (this.dataDomicilio.seccion) ? query + &#x27;&amp;seccion&#x3D;&#x27; + this.dataDomicilio.seccion : query + &#x27;&amp;seccion&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.entrada) ? query + &#x27;&amp;entrada&#x3D;&#x27; + this.dataDomicilio.entrada : query + &#x27;&amp;entrada&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idtipolocalidad) ? query + &#x27;&amp;codtiposlocalidad&#x3D;&#x27; + this.dataDomicilio.idtipolocalidad : query + &#x27;&amp;codtiposlocalidad&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idtipoasentamiento) ? query + &#x27;&amp;codtiposasentamiento&#x3D;&#x27; + this.dataDomicilio.idtipoasentamiento : query + &#x27;&amp;codtiposasentamiento&#x3D;&#x27;;
        
        query &#x3D; (this.dataDomicilio.codasentamiento) ? query + &#x27;&amp;idcolonia&#x3D;&#x27; + this.dataDomicilio.codasentamiento : query + &#x27;&amp;idcolonia&#x3D;&#x27;;
        
        query &#x3D; (this.dataDomicilio.codasentamiento) ? query + &#x27;&amp;codasentamiento&#x3D;&#x27; + this.dataDomicilio.codasentamiento : query + &#x27;&amp;codasentamiento&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.asentamiento) ? query + &#x27;&amp;colonia&#x3D;&#x27; + this.dataDomicilio.asentamiento : query + &#x27;&amp;colonia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.cp) ? query + &#x27;&amp;codigopostal&#x3D;&#x27; + this.dataDomicilio.cp : query + &#x27;&amp;codigopostal&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idciudad) ? query + &#x27;&amp;codciudad&#x3D;&#x27; + this.dataDomicilio.idciudad : query + &#x27;&amp;codciudad&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.ciudad) ? query + &#x27;&amp;ciudad&#x3D;&#x27; + this.dataDomicilio.ciudad : query + &#x27;&amp;ciudad&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idmunicipio) ? query + &#x27;&amp;iddelegacion&#x3D;&#x27; + this.dataDomicilio.idmunicipio : query + &#x27;&amp;iddelegacion&#x27;;
        query &#x3D; (this.dataDomicilio.idmunicipio2) ? query + &#x27;&amp;codmunicipio&#x3D;&#x27; + this.dataDomicilio.idmunicipio2 : query + &#x27;&amp;codmunicipio&#x3D;&#x27;;
        
        query &#x3D; (this.dataDomicilio.idestado &#x3D;&#x3D; 9) ? query + &#x27;&amp;delegacion&#x3D;&#x27; + this.dataDomicilio.delegacion : query + &#x27;&amp;delegacion&#x3D;&#x27; + this.dataDomicilio.municipio;
        
        query &#x3D; (this.dataDomicilio.telefono) ? query + &#x27;&amp;telefono&#x3D;&#x27; + this.dataDomicilio.telefono : query + &#x27;&amp;telefono&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idestado) ? query + &#x27;&amp;codestado&#x3D;&#x27; + this.dataDomicilio.idestado : query + &#x27;&amp;codestado&#x3D;&#x27;;
        query &#x3D; (this.codtiposdireccion) ? query + &#x27;&amp;codtiposdireccion&#x3D;&#x27; + this.codtiposdireccion : query + &#x27;&amp;codtiposdireccion&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.adicional) ? query + &#x27;&amp;indicacionesadicionales&#x3D;&#x27; + this.dataDomicilio.adicional : query + &#x27;&amp;indicacionesadicionales&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.ninterior) ? query + &#x27;&amp;numerointerior&#x3D;&#x27; + this.dataDomicilio.ninterior : query + &#x27;&amp;numerointerior&#x3D;&#x27;;
        
        console.log(&#x27;EL SUPER QUERY!!!!!!&#x27;);
        console.log(query);

        this.http.post(this.endpointCatalogos + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    console.log(res);
                    if(res){
                      this.snackBar.open(&#x27;Registro exitoso&#x27;, &#x27;Cerrar&#x27;, {
                            duration: 10000,
                            horizontalPosition: &#x27;end&#x27;,
                            verticalPosition: &#x27;top&#x27;
                        });
                    }
                    //this.dialogRef.close();
                },
                (error) &#x3D;&gt; {
                    this.snackBar.open(&#x27;Ocurrio un error al Insertar la dirección, intente nuevemente&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Actualiza el domicilio seleccionado.
     */
    actualizarDomicilio(){
        
        let query &#x3D; &#x27;actualizarDireccion?idPersona&#x3D;&#x27; + this.data.idNotario + &#x27;&amp;idDireccion&#x3D;&#x27; + this.iddireccion;

        query &#x3D; (this.dataDomicilio.codtiposvia) ? query + &#x27;&amp;codtiposvia&#x3D;&#x27; + this.dataDomicilio.codtiposvia : query + &#x27;&amp;codtiposvia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idtipovia) ? query + &#x27;&amp;idvia&#x3D;&#x27; + this.dataDomicilio.idtipovia : query + &#x27;&amp;idvia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.via) ? query + &#x27;&amp;via&#x3D;&#x27; + this.dataDomicilio.via : query + &#x27;&amp;via&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.nexterior) ? query + &#x27;&amp;numeroexterior&#x3D;&#x27; + this.dataDomicilio.nexterior : query + &#x27;&amp;numeroexterior&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.entrecalle1) ? query + &#x27;&amp;entrecalle1&#x3D;&#x27;  + this.dataDomicilio.entrecalle1 : query + &#x27;&amp;entrecalle1&#x27;;
        query &#x3D; (this.dataDomicilio.entrecalle2) ? query + &#x27;&amp;entrecalle2&#x3D;&#x27;  + this.dataDomicilio.entrecalle2 : query + &#x27;&amp;entrecalle2&#x27;;
        query &#x3D; (this.dataDomicilio.andador) ? query + &#x27;&amp;andador&#x3D;&#x27; + this.dataDomicilio.andador : query + &#x27;&amp;andador&#x27;;
        query &#x3D; (this.dataDomicilio.edificio) ? query + &#x27;&amp;edificio&#x3D;&#x27; + this.dataDomicilio.edificio : query + &#x27;&amp;edificio&#x27;;
        query &#x3D; (this.dataDomicilio.seccion) ? query + &#x27;&amp;seccion&#x3D;&#x27; + this.dataDomicilio.seccion : query + &#x27;&amp;seccion&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.entrada) ? query + &#x27;&amp;entrada&#x3D;&#x27; + this.dataDomicilio.entrada : query + &#x27;&amp;entrada&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idtipolocalidad) ? query + &#x27;&amp;codtiposlocalidad&#x3D;&#x27; + this.dataDomicilio.idtipolocalidad : query + &#x27;&amp;codtiposlocalidad&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idtipoasentamiento) ? query + &#x27;&amp;codtiposasentamiento&#x3D;&#x27; + this.dataDomicilio.idtipoasentamiento : query + &#x27;&amp;codtiposasentamiento&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.codasentamiento) ? query + &#x27;&amp;idcolonia&#x3D;&#x27; + this.dataDomicilio.codasentamiento : query + &#x27;&amp;idcolonia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.codasentamiento) ? query + &#x27;&amp;codasentamiento&#x3D;&#x27; + this.dataDomicilio.codasentamiento : query + &#x27;&amp;codasentamiento&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.asentamiento) ? query + &#x27;&amp;colonia&#x3D;&#x27; + this.dataDomicilio.asentamiento : query + &#x27;&amp;colonia&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.cp) ? query + &#x27;&amp;codigopostal&#x3D;&#x27; + this.dataDomicilio.cp : query + &#x27;&amp;codigopostal&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idciudad) ? query + &#x27;&amp;codciudad&#x3D;&#x27; + this.dataDomicilio.idciudad : query + &#x27;&amp;codciudad&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.ciudad) ? query + &#x27;&amp;ciudad&#x3D;&#x27; + this.dataDomicilio.ciudad : query + &#x27;&amp;ciudad&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idmunicipio) ? query + &#x27;&amp;iddelegacion&#x3D;&#x27; + this.dataDomicilio.idmunicipio : query + &#x27;&amp;iddelegacion&#x27;;
        query &#x3D; (this.dataDomicilio.idmunicipio2) ? query + &#x27;&amp;codmunicipio&#x3D;&#x27; + this.dataDomicilio.idmunicipio2 : query + &#x27;&amp;codmunicipio&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idestado &#x3D;&#x3D; 9) ? query + &#x27;&amp;delegacion&#x3D;&#x27; + this.dataDomicilio.delegacion : query + &#x27;&amp;delegacion&#x3D;&#x27; + this.dataDomicilio.municipio;
        query &#x3D; (this.dataDomicilio.telefono) ? query + &#x27;&amp;telefono&#x3D;&#x27; + this.dataDomicilio.telefono : query + &#x27;&amp;telefono&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.idestado) ? query + &#x27;&amp;codestado&#x3D;&#x27; + this.dataDomicilio.idestado : query + &#x27;&amp;codestado&#x3D;&#x27;;
        query &#x3D; (this.codtiposdireccion) ? query + &#x27;&amp;codtiposdireccion&#x3D;&#x27; + this.codtiposdireccion : query + &#x27;&amp;codtiposdireccion&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.adicional) ? query + &#x27;&amp;indicacionesadicionales&#x3D;&#x27; + this.dataDomicilio.adicional : query + &#x27;&amp;indicacionesadicionales&#x3D;&#x27;;
        query &#x3D; (this.dataDomicilio.ninterior) ? query + &#x27;&amp;numerointerior&#x3D;&#x27; + this.dataDomicilio.ninterior : query + &#x27;&amp;numerointerior&#x3D;&#x27;;
        
        console.log(&#x27;Actualizacion de Direcciones...&#x27;);
        console.log(query);
        

        this.http.post(this.endpointCatalogos + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    console.log(&quot;AQUI ACTUALIZO&quot;);
                    console.log(res);
                    this.snackBar.open(&#x27;Actualización Correcta&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                },
                (error) &#x3D;&gt; {
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * 
     * @param data Arreglo con los datos del registro seleccionado.
     */
    setDataDomicilio(data): void {
        console.log(&quot;ACA EL COD DATA ESPE&quot;);
        console.log(data);
       
        this.domicilioFormGroup.controls[&#x27;idestado&#x27;].setValue(data.CODESTADO);
        this.getDataMunicipios({value: this.domicilioFormGroup.value.idestado});
        this.domicilioFormGroup.controls[&#x27;codasentamiento&#x27;].setValue(data.IDCOLONIA);
        this.domicilioFormGroup.controls[&#x27;idtipoasentamiento&#x27;].setValue(data.CODTIPOSASENTAMIENTO);
        this.domicilioFormGroup.controls[&#x27;asentamiento&#x27;].setValue(data.COLONIA);
        this.domicilioFormGroup.controls[&#x27;codtiposvia&#x27;].setValue(data.CODTIPOSVIA);
        this.domicilioFormGroup.controls[&#x27;idtipovia&#x27;].setValue(data.IDVIA);
        this.domicilioFormGroup.controls[&#x27;via&#x27;].setValue(data.VIA);
        this.domicilioFormGroup.controls[&#x27;idtipolocalidad&#x27;].setValue(data.CODTIPOSLOCALIDAD);
        this.domicilioFormGroup.controls[&#x27;cp&#x27;].setValue(data.CODIGOPOSTAL);
        this.domicilioFormGroup.controls[&#x27;nexterior&#x27;].setValue(data.NUMEROEXTERIOR);
        this.domicilioFormGroup.controls[&#x27;entrecalle1&#x27;].setValue(data.ENTRECALLE1);
        this.domicilioFormGroup.controls[&#x27;entrecalle2&#x27;].setValue(data.ENTRECALLE2);
        this.domicilioFormGroup.controls[&#x27;andador&#x27;].setValue(data.ANDADOR);
        this.domicilioFormGroup.controls[&#x27;edificio&#x27;].setValue(data.EDIFICIO);
        this.domicilioFormGroup.controls[&#x27;seccion&#x27;].setValue(data.SECCION);
        this.domicilioFormGroup.controls[&#x27;entrada&#x27;].setValue(data.ENTRADA);
        this.domicilioFormGroup.controls[&#x27;ninterior&#x27;].setValue(data.NUMEROINTERIOR);
        this.domicilioFormGroup.controls[&#x27;telefono&#x27;].setValue(data.TELEFONO);
        this.domicilioFormGroup.controls[&#x27;adicional&#x27;].setValue(data.INDICACIONESADICIONALES);
        this.domicilioFormGroup.controls[&#x27;id_direccion&#x27;].setValue(data.IDDIRECCION);
    
        if(data.CODESTADO &#x3D;&#x3D; 9){
            this.domicilioFormGroup.controls[&#x27;idmunicipio&#x27;].setValue(data.IDDELEGACION);
        } else {
            this.domicilioFormGroup.controls[&#x27;idmunicipio2&#x27;].setValue(data.CODMUNICIPIO);
            this.domicilioFormGroup.controls[&#x27;municipio&#x27;].setValue(data.DELEGACION);
            this.domicilioFormGroup.controls[&#x27;ciudad&#x27;].setValue(data.CIUDAD);
            this.domicilioFormGroup.controls[&#x27;idciudad&#x27;].setValue(data.CODCIUDAD);
        }
    }

    /**
     * Abre el dialogo que muestra los municipios de acuerdo al estado,
     * con opción para búsqueda especifica.
     */
    getMunicipios(){
        this.dataDomicilio.idestado &#x3D; this.domicilioFormGroup.value.idestado;
        const dialogRef &#x3D; this.dialog.open(DialogMunicipiosSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                console.log(&quot;MUNICIPIOS!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;idmunicipio2&#x27;].setValue(result.codmunicipio);
                this.domicilioFormGroup.controls[&#x27;municipio&#x27;].setValue(result.municipio);
                this.botonCiudad &#x3D; false;
            }
        });
    }
  
    /**
     * Abre el dialogo que muestra las localidades (ciudades) ligadas al municipio seleccionado previamente,
     * con opción a búsqueda especifica.
     */
    getCiudad(){
        this.dataDomicilio.idmunicipio2 &#x3D; this.domicilioFormGroup.value.idmunicipio2;
        const dialogRef &#x3D; this.dialog.open(DialogCiudadSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado,
                    codMunicipio : this.dataDomicilio.idmunicipio2
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.botonAsentamiento &#x3D; false;
                console.log(&quot;CIUDAD!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;idciudad&#x27;].setValue(result.codciudad);
                this.domicilioFormGroup.controls[&#x27;ciudad&#x27;].setValue(result.ciudad);
            }
        });
    }

    /**
     * Abre el dialogo que muestra los asentamientos ligados a la ciudad
     */
    getAsentamiento(){
        this.dataDomicilio.idestado &#x3D; this.domicilioFormGroup.value.idestado;
        this.dataDomicilio.idmunicipio &#x3D; this.domicilioFormGroup.value.idmunicipio;
        this.dataDomicilio.idmunicipio2 &#x3D; this.domicilioFormGroup.value.idmunicipio2;
        this.dataDomicilio.idciudad &#x3D; (this.domicilioFormGroup.value.idciudad) ? this.domicilioFormGroup.value.idciudad : null;
        const dialogRef &#x3D; this.dialog.open(DialogAsentamientoSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado,
                    codMunicipio : this.dataDomicilio.idmunicipio,
                    codMunicipio2 : this.dataDomicilio.idmunicipio2,
                    codCiudad : this.dataDomicilio.idciudad
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.botonVia &#x3D; false;
                console.log(&quot;ASENTAMIENTO!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;codasentamiento&#x27;].setValue(result.codasentamiento);
                this.domicilioFormGroup.controls[&#x27;asentamiento&#x27;].setValue(result.asentamiento);
                this.domicilioFormGroup.controls[&#x27;idtipoasentamiento&#x27;].setValue(result.codtiposasentamiento);
                this.domicilioFormGroup.controls[&#x27;cp&#x27;].setValue(result.codigopostal);
            }
        });
    }

    /**
     * Abre el dialogo que muestra las vías ligadas al asentamiento
     */
    getVia(){
        this.dataDomicilio.codasentamiento &#x3D;  this.domicilioFormGroup.value.codasentamiento;
        const dialogRef &#x3D; this.dialog.open(DialogViaSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado,
                    codAsentamiento : this.dataDomicilio.codasentamiento
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                console.log(&quot;VIA!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;codtiposvia&#x27;].setValue(result.codtiposvia);
                this.domicilioFormGroup.controls[&#x27;idtipovia&#x27;].setValue(result.idvia);
                this.domicilioFormGroup.controls[&#x27;via&#x27;].setValue(result.via);
            }
        });
    }
}
  
///////////////MUNICIPIOS//////////////////
export interface DataMunicipios{
    codmunicipio: number;
    codestado: number;
    municipio: string;
}
 @Component({
    selector: &#x27;app-dialog-municipios-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-municipios-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
 export class DialogMunicipiosSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;coloniaAsentamiento&#x27;, &#x27;select&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    optionColonia;
    loadingBuscaMun &#x3D; false;
    dataSource &#x3D; [];
    dataPaginate;
    httpOptions;
    buscaMunicipios;
    dataMunicipios: DataMunicipios &#x3D; {} as DataMunicipios;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
  
    constructor(
        private auth: AuthService,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialog: MatDialog,
        public dialogRef: MatDialogRef&lt;DialogMunicipiosSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {
        dialogRef.disableClose &#x3D; true;
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
                &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                Authorization: this.auth.getSession().token
            })
        };
        this.obtenerMunicipios();
        console.log(data);
    }
  
    /**
     * Limpia los registros de la búsqueda especifica realizada y llama al metodo para obtener todos los municipios
     */
    cleanAsentamiento(){
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataSource &#x3D; [];
        this.loadingBuscaMun &#x3D; false;
        this.dataPaginate;
        this.obtenerMunicipios();
    }

    /**
     * Obtiene los municipios de acuerdo al estado seleccionado.
     */
    obtenerMunicipios(){
        this.loadingBuscaMun &#x3D; true;
        let criterio &#x3D; &#x27;&#x27;;
        let query &#x3D; &#x27;&#x27;;
  
        if(this.data.codEstado !&#x3D; 9){
            criterio &#x3D; criterio + &#x27;getMunicipiosByEstado&#x27;;
            query &#x3D; query + &#x27;codEstado&#x3D;&#x27; + this.data.codEstado;
        }else{
            criterio &#x3D; &#x27;&#x27;;
            query &#x3D; &#x27;&#x27;;
        }
  
        console.log(&#x27;ASENTAMIENTOSSSS&#x27;+this.endpoint + &#x27;?&#x27; + query);
        this.loadingBuscaMun &#x3D; true;
        this.http.post(this.endpoint + criterio + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingBuscaMun &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(this.dataSource);
                },
                (error) &#x3D;&gt; {
                    this.loadingBuscaMun &#x3D; false;
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }
  
    /**
     * Se almacena los datos del municipio seleccionado que se motraran en el formulario.
     * @param element Arreglo de los datos del municipio seleccionado
     */
    selectMunicipios(element){
        console.log(element);
        this.dataMunicipios.codestado &#x3D; element.CODESTADO;
        this.dataMunicipios.codmunicipio &#x3D; element.CODMUNICIPIO;
        this.dataMunicipios.municipio &#x3D; element.MUNICIPIO;
    }
  
    /**
     * Obtiene el municipio deseado por el criterio del nombre.
     */
    obtenerMunicipiosPorNombre(){
        this.loadingBuscaMun &#x3D; true;
        let criterio &#x3D; &#x27;&#x27;;
        let query &#x3D; &#x27;&#x27;;
        console.log(this.buscaMunicipios);
        if(this.data.codEstado !&#x3D; 9){
            criterio &#x3D; criterio + &#x27;getMunicipiosByNombre&#x27;;
            query &#x3D; query + &#x27;codEstado&#x3D;&#x27; + this.data.codEstado + &#x27;&amp;municipio&#x3D;&#x27; + this.buscaMunicipios;
        }else{
            criterio &#x3D; &#x27;&#x27;;
            query &#x3D; &#x27;&#x27;;
        }
  
        console.log(&#x27;ASENTAMIENTOSSSS&#x27;+this.endpoint + &#x27;?&#x27; + query);
        this.loadingBuscaMun &#x3D; true;
        this.http.post(this.endpoint + criterio + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingBuscaMun &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(this.dataSource);
                },
                (error) &#x3D;&gt; {
                    this.loadingBuscaMun &#x3D; false;
                }
            );
    }
}
  
///////////////CIUDAD//////////////////
export interface DataCiudad{
    codciudad: number;
    codestado: number;
    ciudad: string;
}
@Component({
    selector: &#x27;app-dialog-ciudad-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-ciudad-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogCiudadSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;ciudad&#x27;, &#x27;select&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    optionColonia;
    loadingBuscaCiudad &#x3D; false;
    dataSource &#x3D; [];
    dataPaginate;
    httpOptions;
    buscaCiudad;
    dataCiudad: DataCiudad &#x3D; {} as DataCiudad;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
  
    constructor(
        private auth: AuthService,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialog: MatDialog,
        public dialogRef: MatDialogRef&lt;DialogCiudadSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {
        dialogRef.disableClose &#x3D; true;
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
                &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                Authorization: this.auth.getSession().token
            })
        };
        this.obtenerCiudad();
        console.log(data);
    }

    /**
     * Limpia la búsqueda especifica realizada y llama al método que obtiene todos los registros previamente mostrados.
     */
    cleanCiudad(){
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataSource &#x3D; [];
        this.loadingBuscaCiudad &#x3D; false;
        this.dataPaginate;
        this.obtenerCiudad();
    }

    /**
     * Obtiene las localidades de acuerdo al estado y municipio seleccionado previamente.
     */
    obtenerCiudad(){
        this.loadingBuscaCiudad &#x3D; true;
        let criterio &#x3D; &#x27;&#x27;;
        let query &#x3D; &#x27;&#x27;;
  
        if(this.data.codEstado !&#x3D; 9){
            criterio &#x3D; criterio + &#x27;getCiudadesByNombre&#x27;;
            query &#x3D; query + &#x27;codEstado&#x3D;&#x27; + this.data.codEstado + &#x27;&amp;codMunicipio&#x3D;&#x27; + this.data.codMunicipio;
        }else{
            criterio &#x3D; &#x27;&#x27;;
            query &#x3D; &#x27;&#x27;;
        }
  
        if(this.buscaCiudad){
            query &#x3D; query + &#x27;&amp;nombre&#x3D;&#x27; + this.buscaCiudad;
        }
  
        console.log(&#x27;CIUDAD!!!!!&#x27;+this.endpoint + &#x27;?&#x27; + query);
        this.loadingBuscaCiudad &#x3D; true;
        this.http.post(this.endpoint + criterio + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingBuscaCiudad &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(this.dataSource);
                },
                (error) &#x3D;&gt; {
                    this.loadingBuscaCiudad &#x3D; false;
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    /**
     * 
     * @param element Arreglo de los datos del registro seleccionado
     */
    selectCiudad(element){
        console.log(element);
        this.dataCiudad.ciudad &#x3D; element.CIUDAD;
        this.dataCiudad.codciudad &#x3D; element.CODCIUDAD;
        this.dataCiudad.codestado &#x3D; element.CODESTADO;
    }
  
   
}
  
///////////////ASENTAMIENTO//////////////////
export interface DataAsentamiento{
    codasentamiento: string;
    asentamiento: string;
    codigopostal: string;
    codtiposasentamiento: string;
}
@Component({
    selector: &#x27;app-dialog-asentamiento-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-asentamiento-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogAsentamientoSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;coloniaAsentamiento&#x27;, &#x27;select&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    optionColonia;
    loading &#x3D; false;
    dataSource &#x3D; [];
    dataPaginate;
    httpOptions;
    buscaAsentamiento;
    dataAsentamiento: DataAsentamiento &#x3D; {} as DataAsentamiento;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
  
    constructor(
        private auth: AuthService,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialog: MatDialog,
        public dialogRef: MatDialogRef&lt;DialogAsentamientoSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {
        dialogRef.disableClose &#x3D; true;
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
                &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                Authorization: this.auth.getSession().token
            })
        };
        this.obtenerAsentamiento();
        console.log(data);
    }
  
     /**
     * Limpia la búsqueda especifica realizada y llama al método que obtiene todos los registros previamente mostrados.
     */
    cleanAsentamiento(){
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataSource &#x3D; [];
        this.loading &#x3D; false;
        this.dataPaginate;
        this.obtenerAsentamiento();
    }
  
    /**
     * Obtiene el asenteamiento de acuerdo al estado, municipio o ciudad.
     */
    obtenerAsentamiento(){
        this.loading &#x3D; true;
        let criterio &#x3D; &#x27;&#x27;;
        let query &#x3D; &#x27;&#x27;;
  
        if(this.data.codEstado &#x3D;&#x3D; 9){
            criterio &#x3D; criterio + &#x27;getColAsentByDelegacion&#x27;;
            query &#x3D; query + &#x27;idDelegacion&#x3D;&#x27; + this.data.codMunicipio;
        }else{
            criterio &#x3D; criterio + &#x27;getAsentamientoByEstado&#x27;;
            query &#x3D; &#x27;codEstado&#x3D;&#x27; + this.data.codEstado + &#x27;&amp;codMunicipio&#x3D;&#x27; + this.data.codMunicipio2;
            query &#x3D; (this.data.codCiudad) ? query + &#x27;&amp;codCiudad&#x3D;&#x27; + this.data.codCiudad : query + &#x27;&amp;codCiudad&#x3D;&#x27;;
        }
  
        if(this.buscaAsentamiento){
            query &#x3D; query + &#x27;&amp;nombre&#x3D;&#x27; + this.buscaAsentamiento;
        }
  
        console.log(&#x27;ASENTAMIENTOSSSS&#x27;+this.endpoint + &#x27;?&#x27; + query);
        this.loading &#x3D; true;
        this.http.post(this.endpoint + criterio + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(this.dataSource);
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }
 
    /**
     * Se almacenan los valores del registro seleccionado.
     * @param element Arreglo de los datos del asentamiento.
     */
    selectAsentamiento(element){
        console.log(element);
        if(element.IDDELEGACION){
            this.dataAsentamiento.codasentamiento &#x3D; element.CODIGO;
            this.dataAsentamiento.asentamiento &#x3D; element.DESCRIPCION;
            this.dataAsentamiento.codigopostal &#x3D; element.CODIGOPOSTAL;
            this.dataAsentamiento.codtiposasentamiento &#x3D; element.CODTIPOSASENTAMIENTO;
        }else{
            this.dataAsentamiento.codasentamiento &#x3D; element.codasentamiento;
            this.dataAsentamiento.asentamiento &#x3D; element.asentamiento;
            this.dataAsentamiento.codigopostal &#x3D; element.codigopostal;
            this.dataAsentamiento.codtiposasentamiento &#x3D; element.codtiposasentamiento;
        }
    }
  
}
  
///////////////VIA//////////////////
export interface dataVia{
    codtiposvia: number;
    idvia: number;
    via : string;
}
@Component({
    selector: &#x27;app-dialog-via-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-via-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogViaSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;via&#x27;, &#x27;select&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    optionVia;
    loadingBuscaVia &#x3D; false;
    dataSource &#x3D; [];
    dataPaginate;
    httpOptions;
    buscaVia;
    dataVia: dataVia &#x3D; {} as dataVia;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
  
    constructor(
        private auth: AuthService,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialog: MatDialog,
        public dialogRef: MatDialogRef&lt;DialogViaSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {
        dialogRef.disableClose &#x3D; true;
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
                &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                Authorization: this.auth.getSession().token
            })
        };
        this.obtenerVia();
        console.log(data);
    }

    /**
     * Limpia los registros de la búsqueda especifica realizada y llama al metodo para obtener todos los municipios
     */
    cleanVia(){
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataSource &#x3D; [];
        this.loadingBuscaVia &#x3D; false;
        this.dataPaginate;
        this.obtenerVia();
    }

    /**
     * Obtiene las vías de acuerdo al criterio del nombre o por el id de la colonia previamente seleccionada
     */
    obtenerVia(){
        this.loadingBuscaVia &#x3D; true;
        let criterio &#x3D; &#x27;getViasByIdColonia&#x27;;
        let query &#x3D; &#x27;&#x27;;
  
        if(this.buscaVia){
            query &#x3D; query + &#x27;nombre&#x3D;&#x27; + this.buscaVia;
        }else{
            query &#x3D; query + &#x27;nombre&#x27;;
        }
  
        if(this.data.codEstado !&#x3D; 9){
            query &#x3D; query + &#x27;&amp;idColonia&#x3D;&#x27; + this.data.codAsentamiento;
        }else{
            query &#x3D; query + &#x27;&amp;idColonia&#x3D;&#x27; + this.data.codAsentamiento;
        }
  
        console.log(&#x27;VIA!!!!!&#x27;+this.endpoint + &#x27;?&#x27; + query);
        this.loadingBuscaVia &#x3D; true;
        this.http.post(this.endpoint + criterio + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingBuscaVia &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(this.dataSource);
                },
                (error) &#x3D;&gt; {
                    this.loadingBuscaVia &#x3D; false;
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    /**
     * 
     * @param element Arreglo de los datos del registro seleccionado.
     */
    selectVia(element){
        console.log(element);
        this.dataVia.codtiposvia &#x3D; element.codtiposvia;
        this.dataVia.idvia &#x3D; element.idvia;
        this.dataVia.via &#x3D; element.via;
    }
}

///////////////REPRESENTACION////////////////
@Component({
    selector: &#x27;app-dialog-representacion&#x27;,
    templateUrl: &#x27;app-dialog-representacion.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogRepresentacionSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    loading &#x3D; false;
    httpOptions;
    tipoPersona &#x3D; &#x27;F&#x27;;
    idPersonaRepresentacion;
    idDocumento;
    idRepresentacion;
    insertOrUpdate &#x3D; null;
    insUp &#x3D; false;
    fisicaFormGroup: FormGroup;
    moralFormGroup: FormGroup;
    dataRepresentacion: DataRepresentacion &#x3D; {} as DataRepresentacion;
  
  
    constructor(
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        private snackBar: MatSnackBar,
        public dialog: MatDialog,
        private auth: AuthService,
        public dialogRef: MatDialogRef&lt;DialogRepresentacionSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {

        dialogRef.disableClose &#x3D; true;
        this.fisicaFormGroup &#x3D; this._formBuilder.group({
            nombre: [null, [Validators.required]],
            apaterno: [null, [Validators.required]],
            amaterno: [null, []],
            rfc: [null, [Validators.required]],
            curp: [null, [Validators.required]],
            ine: [null, []],
            idDocIdent: [&#x27;&#x27;, []],
            docIdent: [null, []],
            fechaNacimiento: [null, []],
            fechaDefuncion: [null, []],
            celular: [null, []],
            email: [null, []],
            texto: [null, []],
            fechaCaducidad: [null, []],
        });
    
        this.moralFormGroup &#x3D; this._formBuilder.group({
            nombre: [null, [Validators.required]],
            rfc: [null, [Validators.required]],
            actPreponderante: [null, []],
            idTipoPersonaMoral: [&#x27;&#x27;, []],
            fechaInicioOperacion: [null, []],
            idMotivo: [&#x27;&#x27;, []],
            fechaCambio: [null, []],
            texto: [null, []],
            fechaCaducidad: [null, []],
        });

        console.log(&quot;ACA LA DATA DEL DIALOG REPRESENTACION&quot;);
        console.log(data);
        if(data.dataRepresentante){
            this.setDataRepresentacion(data.dataRepresentante);
            this.idDocumento &#x3D; data.dataRepresentante.IDDOCUMENTOREPRESENTACION;
            this.idRepresentacion &#x3D; data.dataRepresentante.IDREPRESENTACION;
            this.insertOrUpdate &#x3D; 2;
            this.insUp &#x3D; true;
        }

        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
              &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
              Authorization: this.auth.getSession().token
            })
        };
    }
    
    /**
     * 
     * @param remove Valor del campo que se le retirara la validación, puede ser CURP o RFC
     * @param add  Valor del campo que se le agregara a la validación, puede ser CURP o RFC
     */
    changeRequired(remove, add): void {
        this.fisicaFormGroup.controls[remove].setValue(null);
        this.fisicaFormGroup.controls[remove].clearValidators();
        this.fisicaFormGroup.controls[add].setValidators(Validators.required);
        this.fisicaFormGroup.markAsUntouched();
        this.fisicaFormGroup.updateValueAndValidity();
    }

    /**
     * Abre el dialogo para obtener un contribuyente previamente registrado, al cerrar se obtienen su información
     * para ser registrado en la representación.
     */
    addPersona(): void {
        const dialogRef &#x3D; this.dialog.open(DialogPersonaSociedad, {
            width: &#x27;700px&#x27;,
            data: this.tipoPersona
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.tipoPersona &#x3D; result.tipoPersona;
                this.idPersonaRepresentacion &#x3D; result.id;
                if(this.tipoPersona &#x3D;&#x3D; &#x27;F&#x27;) {
                    this.fisicaFormGroup.controls[&#x27;nombre&#x27;].setValue(result.nombre);
                    this.fisicaFormGroup.controls[&#x27;apaterno&#x27;].setValue(result.apaterno);
                    this.fisicaFormGroup.controls[&#x27;amaterno&#x27;].setValue(result.amaterno);
                    this.fisicaFormGroup.controls[&#x27;rfc&#x27;].setValue(result.rfc);
                    this.fisicaFormGroup.controls[&#x27;curp&#x27;].setValue(result.curp);
                    this.fisicaFormGroup.controls[&#x27;ine&#x27;].setValue(result.ine);
                    this.fisicaFormGroup.controls[&#x27;idDocIdent&#x27;].setValue(result.idDocIdent);
                    this.fisicaFormGroup.controls[&#x27;docIdent&#x27;].setValue(result.docIdent);
                } else {
                    this.moralFormGroup.controls[&#x27;nombre&#x27;].setValue(result.apaterno);
                    this.moralFormGroup.controls[&#x27;rfc&#x27;].setValue(result.rfc);
                }
            }
        });
    }
  
    /**
     * Abre el dialogo para agregar los ficheros y datos relacionados su registro.
     */
    addDocumento(dataDocumento &#x3D; null): void {
        const dialogRef &#x3D; this.dialog.open(DialogDocumentoSociedad, {
            width: &#x27;700px&#x27;,
            data: {idDocumento: this.idDocumento,
                insertOrUpdate: this.insertOrUpdate
            },
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.dataRepresentacion.documentoRepresentacion &#x3D; result;
            }
        });
    }
  
    /**
     * Retira el registro del documento antes de guardar
     */
    removeDocumento(){
          this.dataRepresentacion.documentoRepresentacion &#x3D; undefined;
    }
  
    /**
     *  Obtiene los datos que se registraron en el formulario y guarda la representación junto a todos los datos del documento,
     * representante y representado.
     * @returns Regresa el arreglo de los datos que fueron registrados en el formulario de la representación.
     */
    getDataRepresentacion(): DataRepresentacion {
        this.dataRepresentacion.tipoPersona &#x3D; this.tipoPersona;
        if(this.tipoPersona &#x3D;&#x3D; &#x27;F&#x27;){
            this.dataRepresentacion.nombre &#x3D; (this.fisicaFormGroup.value.nombre) ? this.fisicaFormGroup.value.nombre : null;
            this.dataRepresentacion.apaterno &#x3D; (this.fisicaFormGroup.value.apaterno) ? this.fisicaFormGroup.value.apaterno : null;
            this.dataRepresentacion.amaterno &#x3D; (this.fisicaFormGroup.value.amaterno) ? this.fisicaFormGroup.value.amaterno : null;
            this.dataRepresentacion.rfc &#x3D; (this.fisicaFormGroup.value.rfc) ? this.fisicaFormGroup.value.rfc : null;
            this.dataRepresentacion.curp &#x3D; (this.fisicaFormGroup.value.curp) ? this.fisicaFormGroup.value.curp : null;
            this.dataRepresentacion.ine &#x3D; (this.fisicaFormGroup.value.ine) ? this.fisicaFormGroup.value.ine : null;
            this.dataRepresentacion.idDocIdent &#x3D; this.fisicaFormGroup.value.idDocIdent;
            this.dataRepresentacion.docIdent &#x3D; (this.fisicaFormGroup.value.docIdent) ? this.fisicaFormGroup.value.docIdent : null;
            this.dataRepresentacion.fechaNacimiento &#x3D; (this.fisicaFormGroup.value.fechaNacimiento) ? this.fisicaFormGroup.value.fechaNacimiento : null;
            this.dataRepresentacion.fechaDefuncion &#x3D; (this.fisicaFormGroup.value.fechaDefuncion) ? this.fisicaFormGroup.value.fechaDefuncion : null;
            this.dataRepresentacion.celular &#x3D; (this.fisicaFormGroup.value.celular) ? this.fisicaFormGroup.value.celular : null;
            this.dataRepresentacion.email &#x3D; (this.fisicaFormGroup.value.email) ? this.fisicaFormGroup.value.email : null;
            this.dataRepresentacion.texto &#x3D; (this.fisicaFormGroup.value.texto) ? this.fisicaFormGroup.value.texto : null;
            this.dataRepresentacion.fechaCaducidad &#x3D; (this.fisicaFormGroup.value.fechaCaducidad) ? this.fisicaFormGroup.value.fechaCaducidad : null;
        } else {
            this.dataRepresentacion.nombre &#x3D; (this.moralFormGroup.value.nombre) ? this.moralFormGroup.value.nombre : null;
            this.dataRepresentacion.rfc &#x3D; (this.moralFormGroup.value.rfc) ? this.moralFormGroup.value.rfc : null;
            this.dataRepresentacion.actPreponderante &#x3D; (this.moralFormGroup.value.actPreponderante) ? this.moralFormGroup.value.actPreponderante : null;
            this.dataRepresentacion.idTipoPersonaMoral &#x3D; this.moralFormGroup.value.idTipoPersonaMoral;
            this.dataRepresentacion.fechaInicioOperacion &#x3D; (this.moralFormGroup.value.fechaInicioOperacion) ? this.moralFormGroup.value.fechaInicioOperacion : null;
            this.dataRepresentacion.idMotivo &#x3D; this.moralFormGroup.value.idMotivo;
            this.dataRepresentacion.fechaCambio &#x3D; (this.moralFormGroup.value.fechaCambio) ? this.moralFormGroup.value.fechaCambio : null;
            this.dataRepresentacion.texto &#x3D; (this.moralFormGroup.value.texto) ? this.moralFormGroup.value.texto : null;
            this.dataRepresentacion.fechaCaducidad &#x3D; (this.moralFormGroup.value.fechaCaducidad) ? this.moralFormGroup.value.fechaCaducidad : null;
        }
        this.idPersonaRepresentacion &#x3D; (this.idPersonaRepresentacion) ? this.idPersonaRepresentacion : null;

        console.log(&#x27;AQUIII EL JSON&#x27;);
        console.log(this.dataRepresentacion);
        //console.log(JSON.stringify(this.dataRepresentacion));
        if(this.insertOrUpdate &#x3D;&#x3D; 2){
            this.updateRepresentacion();            
        }else{
            const payload &#x3D; {
                &quot;representacion&quot;: {
                    textorepresentacion: this.dataRepresentacion.texto,
                    fechacaducidad: moment(this.dataRepresentacion.fechaCaducidad).format(&quot;DD-MM-YYYY&quot;)
                },
                &quot;participantes&quot;: [
                    {
                        rol: &quot;representante&quot;,
                        codtiposPersona: this.dataRepresentacion.tipoPersona,
                        idpersona: this.idPersonaRepresentacion,
                        nombre: this.dataRepresentacion.nombre,
                        rfc: this.dataRepresentacion.rfc,
                        apellidoPaterno: this.dataRepresentacion.apaterno,
                        apellidoMaterno: this.dataRepresentacion.amaterno,
                        curp: this.dataRepresentacion.curp,
                        ife: this.dataRepresentacion.ine,
                        iddocIdentif: this.dataRepresentacion.idDocIdent,
                        valdocIdentif: this.dataRepresentacion.docIdent,
                        fechaNacimiento: moment(this.dataRepresentacion.fechaNacimiento).format(&quot;DD-MM-YYYY&quot;),
                        fechaDefuncion: moment(this.dataRepresentacion.fechaDefuncion).format(&quot;DD-MM-YYYY&quot;),
                        celular: this.dataRepresentacion.celular,
                        email: this.dataRepresentacion.email,
                        activprincip: this.dataRepresentacion.actPreponderante,
                        idtipomoral: this.dataRepresentacion.idTipoPersonaMoral,
                        idmotivosmoral: this.dataRepresentacion.idMotivo,
                        fechainicioactiv: moment(this.dataRepresentacion.fechaInicioOperacion).format(&quot;DD-MM-YYYY&quot;),
                        fechacambiosituacion: moment(this.dataRepresentacion.fechaCambio).format(&quot;DD-MM-YYYY&quot;)
                    },
                    {
                        rol:&quot;representado&quot;,
                        codtiposPersona: &quot;M&quot;,
                        idpersona: this.data.idSociedad,
                        nombre: null,
                        rfc: this.data.datosSociedad.rfc,
                        apellidoPaterno: this.data.datosSociedad.razonSocial,
                        apellidoMaterno: null,
                        curp: null,
                        ife: null,
                        iddocIdentif: null,
                        valdocIdentif: null,
                        fechaNacimiento: moment(this.data.datosSociedad.fecha_alta).format(&quot;DD-MM-YYYY&quot;),
                        fechaDefuncion: moment(this.data.datosSociedad.fecha_baja).format(&quot;DD-MM-YYYY&quot;),
                        celular: this.data.datosSociedad.celular,
                        email: this.data.datosSociedad.email,
                        activprincip: this.data.datosSociedad.acta,
                        idtipomoral: this.data.datosSociedad.tipoMoral,
                        idmotivosmoral: this.data.datosSociedad.motivoCambio,
                        fechainicioactiv: moment(this.data.datosSociedad.fechaInicio).format(&quot;DD-MM-YYYY&quot;),
                        fechacambiosituacion: moment(this.data.datosSociedad.fechaCambio).format(&quot;DD-MM-YYYY&quot;)
                    }
                ],
                &quot;documento&quot;: {
                    descripcion: this.dataRepresentacion.documentoRepresentacion.descripcion,        
                    codtipodocumento: this.dataRepresentacion.documentoRepresentacion.codtipodocumento,
                    fecha: moment(this.dataRepresentacion.documentoRepresentacion.fecha).format(&quot;DD-MM-YYYY&quot;),
                    codTipoDocumentoJuridico: this.dataRepresentacion.documentoRepresentacion.codtipodocumentojuridico,        
                    lugar: this.dataRepresentacion.documentoRepresentacion.lugar,
                    idNotario: this.dataRepresentacion.documentoRepresentacion.idnotario,
                    noEscritura: this.dataRepresentacion.documentoRepresentacion.noNotario,
                    documentos: this.dataRepresentacion.documentoRepresentacion.archivos
                }
            };
            
            console.log(JSON.stringify(payload));
            this.http.post( this.endpoint + &#x27;insertarRepresentacion&#x27;, payload, this.httpOptions ). subscribe (
                (res: any) &#x3D;&gt; {
                    this.snackBar.open(&#x27;SE HA INSERTADO TODO&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                    console.log(&quot;AQUI ENTRO LAS RESPUESTA DEL PUT REPRESENTECIÓN&quot;);
                    console.log(res);
                },
                (error) &#x3D;&gt; {
                    this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                });
        }        
        return this.dataRepresentacion;
    }

    /**
     * Actualiza la información de la representación seleccionada.
     */
    updateRepresentacion(){
        console.log(&quot;ACTUALIZA&quot;);
        let queryActRep &#x3D; &#x27;&#x27;;

        queryActRep &#x3D; (this.dataRepresentacion.texto) ? queryActRep + &#x27;textorepresentacion&#x3D;&#x27; + this.dataRepresentacion.texto : queryActRep + &#x27;textorepresentacion&#x3D;&#x27;;

        queryActRep &#x3D; (this.dataRepresentacion.fechaCaducidad) ? queryActRep + &#x27;&amp;fechacaducidad&#x3D;&#x27; + moment(this.dataRepresentacion.fechaCaducidad).format(&quot;DD-MM-YYYY&quot;) : queryActRep + &#x27;&amp;fechacaducidad&#x3D;&#x27;;

        queryActRep &#x3D; queryActRep + &#x27;&amp;idRepresentacion&#x3D;&#x27; + this.idRepresentacion + &#x27;&amp;idDocumentoDigital&#x3D;&#x27; + this.idDocumento;

        console.log(&quot;QUERY ACTUALIZA&quot;);
        console.log(queryActRep);
        this.http.post(this.endpoint + &#x27;actualizarRepresentacion?&#x27; + queryActRep, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.snackBar.open(&#x27;SE HA ACTUALIZADO EL REPRESENTADO&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
                console.log(&quot;AQUI ENTRO LAS RESPUESTA DEL POST ACT REPRESENTADO&quot;);
                console.log(res);
            },
            (error) &#x3D;&gt; {
                this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            });
    }

    /**
     * 
     * @param dataRepresentacion Arreglo con los datos del registro seleccionado.
     */
    setDataRepresentacion(dataRepresentacion): void {
        console.log(&quot;ACA ENTRO EL SLECCIONADO REPRESENTACION&quot;);
        console.log(dataRepresentacion);
        (dataRepresentacion.RFC) ? this.changeRequired(&#x27;curp&#x27;, &#x27;rfc&#x27;) : this.changeRequired(&#x27;rfc&#x27;, &#x27;curp&#x27;);

        this.tipoPersona &#x3D; dataRepresentacion.CODTIPOPERSONA;
        if(this.tipoPersona &#x3D;&#x3D; &#x27;F&#x27;){
            this.fisicaFormGroup.controls[&#x27;nombre&#x27;].setValue(dataRepresentacion.NOMBRE);
            this.fisicaFormGroup.controls[&#x27;apaterno&#x27;].setValue(dataRepresentacion.APELLIDOMATERNO);
            this.fisicaFormGroup.controls[&#x27;amaterno&#x27;].setValue(dataRepresentacion.APELLIDOPATERNO);
            this.fisicaFormGroup.controls[&#x27;rfc&#x27;].setValue(dataRepresentacion.RFC);
            this.fisicaFormGroup.controls[&#x27;curp&#x27;].setValue(dataRepresentacion.CURP);
            this.fisicaFormGroup.controls[&#x27;ine&#x27;].setValue(dataRepresentacion.CLAVEIFE);
            this.fisicaFormGroup.controls[&#x27;idDocIdent&#x27;].setValue(dataRepresentacion.IDDOCIDENTIF);
            this.fisicaFormGroup.controls[&#x27;docIdent&#x27;].setValue(dataRepresentacion.DESCDOCIDENTIF);
            this.fisicaFormGroup.controls[&#x27;fechaNacimiento&#x27;].setValue((dataRepresentacion.FECHANACIMIENTO) ? new Date(dataRepresentacion.FECHANACIMIENTO) : null);
            this.fisicaFormGroup.controls[&#x27;fechaDefuncion&#x27;].setValue((dataRepresentacion.FECHADEFUNCION) ? new Date(dataRepresentacion.FECHADEFUNCION) : null);
            this.fisicaFormGroup.controls[&#x27;celular&#x27;].setValue(dataRepresentacion.CELULAR);
            this.fisicaFormGroup.controls[&#x27;email&#x27;].setValue(dataRepresentacion.EMAIL);
            this.fisicaFormGroup.controls[&#x27;texto&#x27;].setValue(dataRepresentacion.TEXTOREPRESENTACION);
            this.fisicaFormGroup.controls[&#x27;fechaCaducidad&#x27;].setValue((dataRepresentacion.FECHACADUCIDAD) ? new Date(dataRepresentacion.FECHACADUCIDAD) : null);
        } else {
            this.moralFormGroup.controls[&#x27;nombre&#x27;].setValue(dataRepresentacion.APELLIDOPATERNO);
            this.moralFormGroup.controls[&#x27;rfc&#x27;].setValue(dataRepresentacion.RFC);
            this.moralFormGroup.controls[&#x27;actPreponderante&#x27;].setValue(dataRepresentacion.ACTIVPRINCIP);
            this.moralFormGroup.controls[&#x27;idTipoPersonaMoral&#x27;].setValue(dataRepresentacion.IDTIPOMORAL);
            this.moralFormGroup.controls[&#x27;fechaInicioOperacion&#x27;].setValue((dataRepresentacion.FECHAINICIOACTIV) ? new Date(dataRepresentacion.FECHAINICIOACTIV) : null);
            this.moralFormGroup.controls[&#x27;idMotivo&#x27;].setValue(dataRepresentacion.IDMOTIVOSMORAL);
            this.moralFormGroup.controls[&#x27;fechaCambio&#x27;].setValue((dataRepresentacion.FECHACAMBIOSITUACION) ? new Date(dataRepresentacion.FECHACAMBIOSITUACION) : null);
            this.moralFormGroup.controls[&#x27;texto&#x27;].setValue(dataRepresentacion.TEXTOREPRESENTACION);
            this.moralFormGroup.controls[&#x27;fechaCaducidad&#x27;].setValue((dataRepresentacion.FECHACADUCIDAD) ? new Date(dataRepresentacion.FECHACADUCIDAD) : null);
        }
    }
}

///////////////REPRESENTADO////////////////
@Component({
    selector: &#x27;app-dialog-representado&#x27;,
    templateUrl: &#x27;app-dialog-representado.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogRepresentadoSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    loading &#x3D; false;
    httpOptions;
    tipoPersona &#x3D; &#x27;F&#x27;;
    fisicaFormGroup: FormGroup;
    moralFormGroup: FormGroup;
    idPersonaRepresentacion;
    fechaCaducidad;
    idDocumento;
    idRepresentacion;
    insertOrUpdate &#x3D; null;
    insUp &#x3D; false;
    dataRepresentacion: DataRepresentacion &#x3D; {} as DataRepresentacion;
  
    constructor(
        private http: HttpClient,
        private snackBar: MatSnackBar,
        private _formBuilder: FormBuilder,
        public dialog: MatDialog,
        private auth: AuthService,
        public dialogRef: MatDialogRef&lt;DialogRepresentadoSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {

        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
              &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
              Authorization: this.auth.getSession().token
            })
        };

        dialogRef.disableClose &#x3D; true;
        this.fisicaFormGroup &#x3D; this._formBuilder.group({
            nombre: [null, [Validators.required]],
            apaterno: [null, [Validators.required]],
            amaterno: [null, []],
            rfc: [null, [Validators.required]],
            curp: [null, [Validators.required]],
            ine: [null, []],
            idDocIdent: [&#x27;&#x27;, []],
            docIdent: [null, []],
            fechaNacimiento: [null, []],
            fechaDefuncion: [null, []],
            celular: [null, []],
            email: [null, []],
            texto: [null, []],
            fechaCaducidad: [null, []],
        });
    
        this.moralFormGroup &#x3D; this._formBuilder.group({
            nombre: [null, [Validators.required]],
            rfc: [null, [Validators.required]],
            actPreponderante: [null, []],
            idTipoPersonaMoral: [&#x27;&#x27;, []],
            fechaInicioOperacion: [null, []],
            idMotivo: [&#x27;&#x27;, []],
            fechaCambio: [null, []],
            texto: [null, []],
            fechaCaducidad: [null, []],
        });
  
        if(data.dataRepresentante){
            this.setDataRepresentacion(data.dataRepresentante);
            this.idDocumento &#x3D; data.dataRepresentante.IDDOCUMENTOREPRESENTACION;
            this.idRepresentacion &#x3D; data.dataRepresentante.IDREPRESENTACION;
            this.insertOrUpdate &#x3D; 2;
            this.insUp &#x3D; true;
        }
    }

    /**
     * 
     * @param remove Valor del campo que se le retirara la validación, puede ser CURP o RFC
     * @param add  Valor del campo que se le agregara a la validación, puede ser CURP o RFC
     */
    changeRequired(remove, add): void {
        this.fisicaFormGroup.controls[remove].setValue(null);
        this.fisicaFormGroup.controls[remove].clearValidators();
        this.fisicaFormGroup.controls[add].setValidators(Validators.required);
        this.fisicaFormGroup.markAsUntouched();
        this.fisicaFormGroup.updateValueAndValidity();
    }
  
    /**
     * Abre el dialogo para obtener un contribuyente previamente registrado, al cerrar se obtienen su información
     * para ser registrado en la representación.
     */
    addPersona(): void {
        const dialogRef &#x3D; this.dialog.open(DialogPersonaSociedad, {
            width: &#x27;700px&#x27;,
            data: this.tipoPersona
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.tipoPersona &#x3D; result.tipoPersona;
                this.idPersonaRepresentacion &#x3D; result.id;
                if(this.tipoPersona &#x3D;&#x3D; &#x27;F&#x27;) {
                    this.fisicaFormGroup.controls[&#x27;nombre&#x27;].setValue(result.nombre);
                    this.fisicaFormGroup.controls[&#x27;apaterno&#x27;].setValue(result.apaterno);
                    this.fisicaFormGroup.controls[&#x27;amaterno&#x27;].setValue(result.amaterno);
                    this.fisicaFormGroup.controls[&#x27;rfc&#x27;].setValue(result.rfc);
                    this.fisicaFormGroup.controls[&#x27;curp&#x27;].setValue(result.curp);
                    this.fisicaFormGroup.controls[&#x27;ine&#x27;].setValue(result.ine);
                    this.fisicaFormGroup.controls[&#x27;idDocIdent&#x27;].setValue(result.idDocIdent);
                    this.fisicaFormGroup.controls[&#x27;docIdent&#x27;].setValue(result.docIdent);
                } else {
                    this.moralFormGroup.controls[&#x27;nombre&#x27;].setValue(result.apaterno);
                    this.moralFormGroup.controls[&#x27;rfc&#x27;].setValue(result.rfc);
                }
            }
        });
    }
  
     /**
     * Abre el dialogo para agregar los ficheros y datos relacionados su registro.
     */
    addDocumento(dataDocumento &#x3D; null): void {
        const dialogRef &#x3D; this.dialog.open(DialogDocumentoSociedad, {
            width: &#x27;700px&#x27;,
            data: {idDocumento: this.idDocumento,
                insertOrUpdate: this.insertOrUpdate
            },
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.dataRepresentacion.documentoRepresentacion &#x3D; result;
            }
        });
    }
  
    /**
     * Retira el registro del documento antes de guardar
     */
    removeDocumento(){
          this.dataRepresentacion.documentoRepresentacion &#x3D; undefined;
    }
  
    /**
     *  Obtiene los datos que se registraron en el formulario y guarda la representación junto a todos los datos del documento,
     * representante y representado.
     * @returns Regresa el arreglo de los datos que fueron registrados en el formulario de la representación.
     */
    getDataRepresentacion(): DataRepresentacion {
        this.dataRepresentacion.tipoPersona &#x3D; this.tipoPersona;
        if(this.tipoPersona &#x3D;&#x3D; &#x27;F&#x27;){
            this.dataRepresentacion.nombre &#x3D; (this.fisicaFormGroup.value.nombre) ? this.fisicaFormGroup.value.nombre : null;
            this.dataRepresentacion.apaterno &#x3D; (this.fisicaFormGroup.value.apaterno) ? this.fisicaFormGroup.value.apaterno : null;
            this.dataRepresentacion.amaterno &#x3D; (this.fisicaFormGroup.value.amaterno) ? this.fisicaFormGroup.value.amaterno : null;
            this.dataRepresentacion.rfc &#x3D; (this.fisicaFormGroup.value.rfc) ? this.fisicaFormGroup.value.rfc : null;
            this.dataRepresentacion.curp &#x3D; (this.fisicaFormGroup.value.curp) ? this.fisicaFormGroup.value.curp : null;
            this.dataRepresentacion.ine &#x3D; (this.fisicaFormGroup.value.ine) ? this.fisicaFormGroup.value.ine : null;
            this.dataRepresentacion.idDocIdent &#x3D; this.fisicaFormGroup.value.idDocIdent;
            this.dataRepresentacion.docIdent &#x3D; (this.fisicaFormGroup.value.docIdent) ? this.fisicaFormGroup.value.docIdent : null;
            this.dataRepresentacion.fechaNacimiento &#x3D; (this.fisicaFormGroup.value.fechaNacimiento) ? this.fisicaFormGroup.value.fechaNacimiento : null;
            this.dataRepresentacion.fechaDefuncion &#x3D; (this.fisicaFormGroup.value.fechaDefuncion) ? this.fisicaFormGroup.value.fechaDefuncion : null;
            this.dataRepresentacion.celular &#x3D; (this.fisicaFormGroup.value.celular) ? this.fisicaFormGroup.value.celular : null;
            this.dataRepresentacion.email &#x3D; (this.fisicaFormGroup.value.email) ? this.fisicaFormGroup.value.email : null;
            this.dataRepresentacion.texto &#x3D; (this.fisicaFormGroup.value.texto) ? this.fisicaFormGroup.value.texto : null;
            this.dataRepresentacion.fechaCaducidad &#x3D; (this.fisicaFormGroup.value.fechaCaducidad) ? this.fisicaFormGroup.value.fechaCaducidad : null;
        } else {
            this.dataRepresentacion.nombre &#x3D; (this.moralFormGroup.value.nombre) ? this.moralFormGroup.value.nombre : null;
            this.dataRepresentacion.rfc &#x3D; (this.moralFormGroup.value.rfc) ? this.moralFormGroup.value.rfc : null;
            this.dataRepresentacion.actPreponderante &#x3D; (this.moralFormGroup.value.actPreponderante) ? this.moralFormGroup.value.actPreponderante : null;
            this.dataRepresentacion.idTipoPersonaMoral &#x3D; this.moralFormGroup.value.idTipoPersonaMoral;
            this.dataRepresentacion.fechaInicioOperacion &#x3D; (this.moralFormGroup.value.fechaInicioOperacion) ? this.moralFormGroup.value.fechaInicioOperacion : null;
            this.dataRepresentacion.idMotivo &#x3D; this.moralFormGroup.value.idMotivo;
            this.dataRepresentacion.fechaCambio &#x3D; (this.moralFormGroup.value.fechaCambio) ? this.moralFormGroup.value.fechaCambio : null;
            this.dataRepresentacion.texto &#x3D; (this.moralFormGroup.value.texto) ? this.moralFormGroup.value.texto : null;
            this.dataRepresentacion.fechaCaducidad &#x3D; (this.moralFormGroup.value.fechaCaducidad) ? this.moralFormGroup.value.fechaCaducidad : null;
        }

        this.idPersonaRepresentacion &#x3D; (this.idPersonaRepresentacion) ? this.idPersonaRepresentacion : null;
        console.log(&#x27;AQUIII EL JSON DEL REPRESENTADO&#x27;);
        console.log(this.dataRepresentacion);
        //console.log(JSON.stringify(this.dataRepresentacion));

        if(this.insertOrUpdate &#x3D;&#x3D; 2){
            this.updateRepresentacion();            
        }else{
            const payload &#x3D; {
                &quot;representacion&quot;: {
                    textorepresentacion: this.dataRepresentacion.texto,
                    fechacaducidad: moment(this.dataRepresentacion.fechaCaducidad).format(&quot;DD-MM-YYYY&quot;)
                },
                &quot;participantes&quot;: [
                    {
                        rol: &quot;representado&quot;,
                        codtiposPersona: this.dataRepresentacion.tipoPersona,
                        idpersona: this.idPersonaRepresentacion,
                        nombre: this.dataRepresentacion.nombre,
                        rfc: this.dataRepresentacion.rfc,
                        apellidoPaterno: this.dataRepresentacion.apaterno,
                        apellidoMaterno: this.dataRepresentacion.amaterno,
                        curp: this.dataRepresentacion.curp,
                        ife: this.dataRepresentacion.ine,
                        iddocIdentif: this.dataRepresentacion.idDocIdent,
                        valdocIdentif: this.dataRepresentacion.docIdent,
                        fechaNacimiento: moment(this.dataRepresentacion.fechaNacimiento).format(&quot;DD-MM-YYYY&quot;),
                        fechaDefuncion: moment(this.dataRepresentacion.fechaDefuncion).format(&quot;DD-MM-YYYY&quot;),
                        celular: this.dataRepresentacion.celular,
                        email: this.dataRepresentacion.email,
                        activprincip: this.dataRepresentacion.actPreponderante,
                        idtipomoral: this.dataRepresentacion.idTipoPersonaMoral,
                        idmotivosmoral: this.dataRepresentacion.idMotivo,
                        fechainicioactiv: moment(this.dataRepresentacion.fechaInicioOperacion).format(&quot;DD-MM-YYYY&quot;),
                        fechacambiosituacion: moment(this.dataRepresentacion.fechaCambio).format(&quot;DD-MM-YYYY&quot;)
                    },
                    {
                        rol:&quot;representante&quot;,
                        codtiposPersona: &quot;M&quot;,
                        idpersona: this.data.idSociedad,
                        nombre: null,
                        rfc: this.data.datosSociedad.rfc,
                        apellidoPaterno: this.data.datosSociedad.razonSocial,
                        apellidoMaterno: null,
                        curp: null,
                        ife: null,
                        iddocIdentif: null,
                        valdocIdentif: null,
                        fechaNacimiento: moment(this.data.datosSociedad.fecha_alta).format(&quot;DD-MM-YYYY&quot;),
                        fechaDefuncion: moment(this.data.datosSociedad.fecha_baja).format(&quot;DD-MM-YYYY&quot;),
                        celular: this.data.datosSociedad.celular,
                        email: this.data.datosSociedad.email,
                        activprincip: this.data.datosSociedad.acta,
                        idtipomoral: this.data.datosSociedad.tipoMoral,
                        idmotivosmoral: this.data.datosSociedad.motivoCambio,
                        fechainicioactiv: moment(this.data.datosSociedad.fechaInicio).format(&quot;DD-MM-YYYY&quot;),
                        fechacambiosituacion: moment(this.data.datosSociedad.fechaCambio).format(&quot;DD-MM-YYYY&quot;)
                    }
                ],
                &quot;documento&quot;: {
                    descripcion: this.dataRepresentacion.documentoRepresentacion.descripcion,        
                    codtipodocumento: this.dataRepresentacion.documentoRepresentacion.codtipodocumento,
                    fecha: moment(this.dataRepresentacion.documentoRepresentacion.fecha).format(&quot;DD-MM-YYYY&quot;),
                    codTipoDocumentoJuridico: this.dataRepresentacion.documentoRepresentacion.codtipodocumentojuridico,        
                    lugar: this.dataRepresentacion.documentoRepresentacion.lugar,
                    idNotario: this.dataRepresentacion.documentoRepresentacion.idnotario,
                    noEscritura: this.dataRepresentacion.documentoRepresentacion.noNotario,
                    documentos: this.dataRepresentacion.documentoRepresentacion.archivos
                }
            };
            
            console.log(JSON.stringify(payload));
            this.http.post( this.endpoint + &#x27;insertarRepresentacion&#x27;, payload, this.httpOptions ). subscribe (
                (res: any) &#x3D;&gt; {
                    this.snackBar.open(&#x27;SE HA INSERTADO TODO&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                    console.log(&quot;AQUI ENTRO LAS RESPUESTA DEL PUT REPRESENTECIÓN&quot;);
                    console.log(res);
                },
                (error) &#x3D;&gt; {
                    this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                });
        }

        return this.dataRepresentacion;
    }
  
    /**
     * Actualiza la información de la representación seleccionada.
     */
    updateRepresentacion(){
        console.log(&quot;ACTUALIZA&quot;);
        let queryActRep &#x3D; &#x27;&#x27;;

        queryActRep &#x3D; (this.dataRepresentacion.texto) ? queryActRep + &#x27;textorepresentacion&#x3D;&#x27; + this.dataRepresentacion.texto : queryActRep + &#x27;textorepresentacion&#x3D;&#x27;;

        queryActRep &#x3D; (this.dataRepresentacion.fechaCaducidad) ? queryActRep + &#x27;&amp;fechacaducidad&#x3D;&#x27; + moment(this.dataRepresentacion.fechaCaducidad).format(&quot;DD-MM-YYYY&quot;) : queryActRep + &#x27;&amp;fechacaducidad&#x3D;&#x27;;

        queryActRep &#x3D; queryActRep + &#x27;&amp;idRepresentacion&#x3D;&#x27; + this.idRepresentacion + &#x27;&amp;idDocumentoDigital&#x3D;&#x27; + this.idDocumento;

        //actualizarRepresentaciontextorepresentacion&#x3D;Texto Representacion Prueba 33&amp;fechacaducidad&#x3D;Fri Dec 31 2021 00:00:00 GMT-0600 (hora estándar central)&amp;idRepresentacion&#x3D;14&amp;idDocumentoDigital&#x3D;17646226
        console.log(&quot;QUERY ACTUALIZA&quot;);
        console.log(queryActRep);
        //return;
        this.http.post(this.endpoint + &#x27;actualizarRepresentacion?&#x27; + queryActRep, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.snackBar.open(&#x27;SE HA ACTUALIZADO EL REPRESENTADO&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
                console.log(&quot;AQUI ENTRO LAS RESPUESTA DEL POST ACT REPRESENTADO&quot;);
                console.log(res);
            },
            (error) &#x3D;&gt; {
                this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            });
    }

    /**
     * 
     * @param dataRepresentacion Arreglo con los datos del registro seleccionado.
     */
    setDataRepresentacion(dataRepresentacion): void {
        console.log(&quot;ACA ENTRO EL SLECCIONADO REPRESENTACION&quot;);
        console.log(dataRepresentacion);
        (dataRepresentacion.RFC) ? this.changeRequired(&#x27;curp&#x27;, &#x27;rfc&#x27;) : this.changeRequired(&#x27;rfc&#x27;, &#x27;curp&#x27;);
        
        this.tipoPersona &#x3D; dataRepresentacion.CODTIPOPERSONA;
        if(this.tipoPersona &#x3D;&#x3D; &#x27;F&#x27;){
            this.fisicaFormGroup.controls[&#x27;nombre&#x27;].setValue(dataRepresentacion.NOMBRE);
            this.fisicaFormGroup.controls[&#x27;apaterno&#x27;].setValue(dataRepresentacion.APELLIDOMATERNO);
            this.fisicaFormGroup.controls[&#x27;amaterno&#x27;].setValue(dataRepresentacion.APELLIDOPATERNO);
            this.fisicaFormGroup.controls[&#x27;rfc&#x27;].setValue(dataRepresentacion.RFC);
            this.fisicaFormGroup.controls[&#x27;curp&#x27;].setValue(dataRepresentacion.CURP);
            this.fisicaFormGroup.controls[&#x27;ine&#x27;].setValue(dataRepresentacion.CLAVEIFE);
            this.fisicaFormGroup.controls[&#x27;idDocIdent&#x27;].setValue(dataRepresentacion.IDDOCIDENTIF);
            this.fisicaFormGroup.controls[&#x27;docIdent&#x27;].setValue(dataRepresentacion.DESCDOCIDENTIF);
            this.fisicaFormGroup.controls[&#x27;fechaNacimiento&#x27;].setValue((dataRepresentacion.FECHANACIMIENTO) ? new Date(dataRepresentacion.FECHANACIMIENTO) : null);
            this.fisicaFormGroup.controls[&#x27;fechaDefuncion&#x27;].setValue((dataRepresentacion.FECHADEFUNCION) ? new Date(dataRepresentacion.FECHADEFUNCION) : null);
            this.fisicaFormGroup.controls[&#x27;celular&#x27;].setValue(dataRepresentacion.CELULAR);
            this.fisicaFormGroup.controls[&#x27;email&#x27;].setValue(dataRepresentacion.EMAIL);
            this.fisicaFormGroup.controls[&#x27;texto&#x27;].setValue(dataRepresentacion.TEXTOREPRESENTACION);
            this.fisicaFormGroup.controls[&#x27;fechaCaducidad&#x27;].setValue((dataRepresentacion.FECHACADUCIDAD) ? new Date(dataRepresentacion.FECHACADUCIDAD) : null);
        } else {
            this.moralFormGroup.controls[&#x27;nombre&#x27;].setValue(dataRepresentacion.APELLIDOPATERNO);
            this.moralFormGroup.controls[&#x27;rfc&#x27;].setValue(dataRepresentacion.RFC);
            this.moralFormGroup.controls[&#x27;actPreponderante&#x27;].setValue(dataRepresentacion.ACTIVPRINCIP);
            this.moralFormGroup.controls[&#x27;idTipoPersonaMoral&#x27;].setValue(dataRepresentacion.IDTIPOMORAL);
            this.moralFormGroup.controls[&#x27;fechaInicioOperacion&#x27;].setValue((dataRepresentacion.FECHAINICIOACTIV) ? new Date(dataRepresentacion.FECHAINICIOACTIV) : null);
            this.moralFormGroup.controls[&#x27;idMotivo&#x27;].setValue(dataRepresentacion.IDMOTIVOSMORAL);
            this.moralFormGroup.controls[&#x27;fechaCambio&#x27;].setValue((dataRepresentacion.FECHACAMBIOSITUACION) ? new Date(dataRepresentacion.FECHACAMBIOSITUACION) : null);
            this.moralFormGroup.controls[&#x27;texto&#x27;].setValue(dataRepresentacion.TEXTOREPRESENTACION);
            this.moralFormGroup.controls[&#x27;fechaCaducidad&#x27;].setValue((dataRepresentacion.FECHACADUCIDAD) ? new Date(dataRepresentacion.FECHACADUCIDAD) : null);
        }
        
        //this.dataRepresentacion.documentoRepresentacion &#x3D; dataRepresentacion.documentoRepresentacion;
        
    }
}
  
///////////////DOCUMENTO////////////////
@Component({
    selector: &#x27;app-dialog-documento&#x27;,
    templateUrl: &#x27;app-dialog-documento.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogDocumentoSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    loadingTiposDocumentoDigital &#x3D; false;
    loadingTiposDocumentoJuridico &#x3D; false;
    httpOptions;
    tiposDocumentoDigital;
    tiposDocumentoJuridico;
    selectTipoDoc &#x3D; &#x27;1&#x27;;
    idDocumento;
    insertOrUpdate;
    insUp &#x3D; false;
    tiposDocumentoFormGroup: FormGroup;
    infoDocumentoFormGroup: FormGroup;
    archivosDocumentoFormGroup: FormGroup;
    dataDocumentoSet;
    fechaDocto;
    dataDoc &#x3D; [];
    descargaFichero &#x3D; [];
    displayedColumnsDoc: string[] &#x3D; [&#x27;nombre&#x27;,&#x27;descripcion&#x27;, &#x27;download&#x27;, &#x27;eliminar&#x27;];
    dataDocumento: DataDocumentoRepresentacion &#x3D; {} as DataDocumentoRepresentacion;
    canSend &#x3D; false;
    
    constructor(
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        private snackBar: MatSnackBar,
        public dialog: MatDialog,
        private auth: AuthService,
        public dialogRef: MatDialogRef&lt;DialogDocumentoSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {

        dialogRef.disableClose &#x3D; true;

        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
              &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
              Authorization: this.auth.getSession().token
            })
        };

        this.tiposDocumentoFormGroup &#x3D; this._formBuilder.group({
            codtipodocumento: [&#x27;&#x27;, [Validators.required]],
            codtipodocumentojuridico: [&#x27;&#x27;, [Validators.required]]
        });
  
        this.infoDocumentoFormGroup &#x3D; this._formBuilder.group({
            fecha: [null, [Validators.required]],
            descripcion: [null, []],
            lugar: [null, [Validators.required]]
        });
  
        this.archivosDocumentoFormGroup &#x3D; this._formBuilder.group({
            archivos: this._formBuilder.array([])
        });

        
        this.tiposDocumentoFormGroup.controls.codtipodocumentojuridico.valueChanges.subscribe(codtipodocumentojuridico &#x3D;&gt; {
        if(codtipodocumentojuridico &#x3D;&#x3D; &#x27;PN&#x27;) {
            this.infoDocumentoFormGroup.addControl(&#x27;noNotario&#x27;, new FormControl(null, Validators.required));
            this.infoDocumentoFormGroup.addControl(&#x27;ciudadNotario&#x27;, new FormControl(null, Validators.required));
            this.infoDocumentoFormGroup.addControl(&#x27;nombreNotario&#x27;, new FormControl(null, Validators.required));
            this.infoDocumentoFormGroup.addControl(&#x27;num_escritura&#x27;, new FormControl(null, Validators.required));
        } else {
            this.infoDocumentoFormGroup.removeControl(&#x27;noNotario&#x27;);
            this.infoDocumentoFormGroup.removeControl(&#x27;ciudadNotario&#x27;);
            this.infoDocumentoFormGroup.removeControl(&#x27;nombreNotario&#x27;);
            this.infoDocumentoFormGroup.removeControl(&#x27;num_escritura&#x27;);
        }
            this.infoDocumentoFormGroup.updateValueAndValidity();
        });
        console.log(this.tiposDocumentoFormGroup.controls.codtipodocumentojuridico);
        if(data.idDocumento){
            this.setDataDocumento(data.idDocumento);
            this.insertOrUpdate &#x3D; data.insertOrUpdate;
            this.idDocumento &#x3D; data.idDocumento;
            this.insUp &#x3D; true;
        }
        console.log(&quot;ACA EL DATA DEL DOCU DIALOG&quot;);
        console.log(data);
    }
  
    // getDataTiposDocumentoDigital(): void {
    //     this.loadingTiposDocumentoDigital &#x3D; true;
    //     this.http.get(this.endpoint, this.httpOptions).subscribe(
    //         (res: any) &#x3D;&gt; {
    //             this.loadingTiposDocumentoDigital &#x3D; false;
    //             this.tiposDocumentoDigital &#x3D; res;
    //         },
    //         (error) &#x3D;&gt; {
    //             this.loadingTiposDocumentoDigital &#x3D; false;
    //         }
    //     );
    // }
  
    // getDataTiposDocumentoJuridico(): void {
    //     this.loadingTiposDocumentoJuridico &#x3D; true;
    //     this.http.get(this.endpoint, this.httpOptions).subscribe(
    //         (res: any) &#x3D;&gt; {
    //             this.loadingTiposDocumentoJuridico &#x3D; false;
    //             this.tiposDocumentoJuridico &#x3D; res;
    //         },
    //         (error) &#x3D;&gt; {
    //             this.loadingTiposDocumentoJuridico &#x3D; false;
    //         }
    //     );
    // }

    /**
     * 
     * @param event Contiene el nombre de la etiqueta option de acuerdo al valor de este en el select.
     */
    getTipoDocJuridico(event): void {
        this.dataDocumento.nombreTipoDocumentoJuridico &#x3D; event.source.triggerValue;
    }
  
    /**
     * Abre el dialogo para registrar al notario en caso de ser un Poder notarial el documento.
     */
    addNotario(): void {
        const dialogRef &#x3D; this.dialog.open(DialogNotarioSociedad, {
            width: &#x27;700px&#x27;,
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.dataDocumento.idnotario &#x3D; result.id;
                this.infoDocumentoFormGroup.controls[&#x27;noNotario&#x27;].setValue(result.numero);
                this.infoDocumentoFormGroup.controls[&#x27;ciudadNotario&#x27;].setValue(result.ciudad);
                this.infoDocumentoFormGroup.controls[&#x27;nombreNotario&#x27;].setValue(result.nombre);
            }
        });
    }
  
    /**
     * 
     * @param data Datos de los ficheros que activan la validación del mismo en el formulario.
     * @returns 
     */
    createItem(data): FormGroup {
        return this._formBuilder.group(data);
    }
  
    /**
     * 
     * @param i Número del index del registro seleccionado.
     */
    removeItem(i) {
        this.archivos.removeAt(i);
      }
  
    get archivos(): FormArray {
        return this.archivosDocumentoFormGroup.get(&#x27;archivos&#x27;) as FormArray;
    };

    /**
     * 
     * @param event Arreglo de los ficheros seleccionados para su envío.
     */
    getArchivos(event) {
        let files &#x3D; event.target.files;
        if(files){
            for(let file of files){
                const reader &#x3D; new FileReader();
                reader.readAsDataURL(file);
                reader.onload &#x3D; () &#x3D;&gt; {
                    this.archivos.push(this.createItem({
                    nombre: file.name,
                    base64: reader.result
                    }));
                };
            }
        }
    }

    /**
     * Se almacenan los datos del registro del documento de acuerdo al seleccionado (Carta poder o Poder notarial),
     * en caso de ser una actualización llamara al método correspondiente.
     */
    getDataDocumento(): void {
        this.dataDocumento.codtipodocumento &#x3D; this.tiposDocumentoFormGroup.value.codtipodocumento;
        this.dataDocumento.codtipodocumentojuridico &#x3D; this.tiposDocumentoFormGroup.value.codtipodocumentojuridico;
        if(this.tiposDocumentoFormGroup.value.codtipodocumentojuridico &#x3D;&#x3D; &#x27;PN&#x27;){
            this.dataDocumento.noNotario &#x3D; (this.infoDocumentoFormGroup.value.noNotario) ? this.infoDocumentoFormGroup.value.noNotario : null;
            this.dataDocumento.ciudadNotario &#x3D; (this.infoDocumentoFormGroup.value.ciudadNotario) ? this.infoDocumentoFormGroup.value.ciudadNotario : null;
            this.dataDocumento.nombreNotario &#x3D; (this.infoDocumentoFormGroup.value.nombreNotario) ? this.infoDocumentoFormGroup.value.nombreNotario : null;
            this.dataDocumento.num_escritura &#x3D; (this.infoDocumentoFormGroup.value.num_escritura) ? this.infoDocumentoFormGroup.value.num_escritura : null;
        }
        this.dataDocumento.fecha &#x3D; (this.infoDocumentoFormGroup.value.fecha) ? this.infoDocumentoFormGroup.value.fecha : null;
        this.dataDocumento.descripcion &#x3D; (this.infoDocumentoFormGroup.value.descripcion) ? this.infoDocumentoFormGroup.value.descripcion : null;
        this.dataDocumento.lugar &#x3D; (this.infoDocumentoFormGroup.value.lugar) ? this.infoDocumentoFormGroup.value.lugar : null;
        this.dataDocumento.archivos &#x3D; this.archivosDocumentoFormGroup.value.archivos;
    
        if(this.insertOrUpdate &#x3D;&#x3D; 2){
            this.updateDocto();
        }else{
            this.canSend &#x3D; true;
        }
    }

    /**
     * 
     * @param idDocumento2 Valor del idDocumento utilizado para la búsqueda del mismo
     */
    setDataDocumento(idDocumento2): void {

        this.http.post(this.endpoint + &#x27;infoDocumentos?idDocumentoDigital&#x3D;&#x27; + idDocumento2, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                console.log(&quot;AQUI ENTRO EL RESULTADO DEL DOCUMENTO&quot;);
                this.dataDocumentoSet &#x3D; res;
                console.log(this.dataDocumentoSet.infoDocumento[0].iddocumentodigital);
                console.log(res);
                this.setDoc();
            },
            (error) &#x3D;&gt; {
                this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            });
    }

    /**
     * Se almacenan los datos relacionados con el documento cuando se ha seleccionado la opción de editar documento.
     */
    setDoc(){
        console.log(&quot;LA FECHA NO SE DEJA&quot;);
        console.log(this.fechaDocto);

        //this.tiposDocumentoFormGroup.controls[&#x27;codtipodocumento&#x27;].setValue(1);
        this.tiposDocumentoFormGroup.controls[&#x27;codtipodocumentojuridico&#x27;].setValue(this.dataDocumentoSet.infoDocumento[0].codtipodocumentojuridico);
        if(this.dataDocumentoSet.infoDocumento[0].codtipodocumentojuridico &#x3D;&#x3D; &#x27;PN&#x27;){
            this.dataDocumento.idnotario &#x3D; this.dataDocumentoSet.infoNotario[0].idnotario;
            this.infoDocumentoFormGroup.controls[&#x27;noNotario&#x27;].setValue(this.dataDocumentoSet.infoNotario[0].numnotario);
            this.infoDocumentoFormGroup.controls[&#x27;ciudadNotario&#x27;].setValue(this.dataDocumentoSet.infoNotario[0].codestado);
            this.infoDocumentoFormGroup.controls[&#x27;nombreNotario&#x27;].setValue(this.dataDocumentoSet.infoNotario[0].nombre);
            this.infoDocumentoFormGroup.controls[&#x27;num_escritura&#x27;].setValue(&#x27;&#x27;);
        }

        this.infoDocumentoFormGroup.controls[&#x27;fecha&#x27;].setValue(new Date(this.dataDocumentoSet.infoDocumento[0].fecha));
        this.infoDocumentoFormGroup.controls[&#x27;descripcion&#x27;].setValue(this.dataDocumentoSet.infoDocumento[0].descripcion);
        this.infoDocumentoFormGroup.controls[&#x27;lugar&#x27;].setValue(this.dataDocumentoSet.infoDocumento[0].lugar);

        console.log(this.fechaDocto);    
        this.dataDoc &#x3D; this.dataDocumentoSet.infoFicheros;
    }

    /**
     * Realiza la consulta del fichero previamente guardado.
     * @param element Arreglo de los datos del registro seleccionado.
     */
    descargarDoc(element){

        console.log(&quot;ACA EL DESCARGAR FICHERO&quot;);
        console.log(element);

        this.http.post( this.endpoint + &#x27;getFichero?idFichero&#x3D;&#x27; + element.idficherodocumento, &#x27;&#x27;, this.httpOptions ). subscribe (
            (res: any) &#x3D;&gt; {
                this.descargaFichero &#x3D; res;
                console.log(&quot;EL RES DEL FICHERO&quot;);
                console.log(this.descargaFichero);
                console.log(this.descargaFichero[0].binariodatos);
                this.convertirDoc();
            },
            (error) &#x3D;&gt; {
                this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            });
    }

    /**
     * Convierte el base 64 del fichero guardado para su descarga en PDF.
     */
    convertirDoc(){
        let dataFichero &#x3D; this.descargaFichero[0].binariodatos;
        dataFichero &#x3D; dataFichero.split(&quot;data:application/pdf;base64,&quot;);
        console.log(&quot;split&quot;);
        console.log(dataFichero);
        const blob &#x3D; this.b64toBlob(dataFichero[1], &#x27;application/pdf&#x27;);
        FileSaver.saveAs(blob, this.descargaFichero[0].nombre);
    }

    /**
     * 
     * @param b64Data El fichero en base 64.
     * @param contentType Tipo de fichero.
     * @param sliceSize 
     * @returns Regresa el fichero a descargar
     */
    b64toBlob(b64Data, contentType &#x3D; &#x27;&#x27;, sliceSize &#x3D; 512): Blob {
        const byteCharacters &#x3D; atob(b64Data);
        const byteArrays &#x3D; [];
        for (let offset &#x3D; 0; offset &lt; byteCharacters.length; offset +&#x3D; sliceSize) {
            const slice &#x3D; byteCharacters.slice(offset, offset + sliceSize);
            const byteNumbers &#x3D; new Array(slice.length);
            for (let i &#x3D; 0; i &lt; slice.length; i++) {
            byteNumbers[i] &#x3D; slice.charCodeAt(i);
            }
            const byteArray &#x3D; new Uint8Array(byteNumbers);
            byteArrays.push(byteArray);
        }
        const blob &#x3D; new Blob(byteArrays, {type: contentType});
        return blob;
    }

    /**
     * 
     * @param element Arreglo con los datos seleccionados del registro.
     * @param i Valor del index del registro seleccionado.
     */
    eliminarDoc(element, i){
        console.log(&quot;ACA EL ELIMINAR FICHERO&quot;);
        console.log(element);

        this.http.post( this.endpoint + &#x27;borrarFichero?lista&#x3D;&#x27; + element.idficherodocumento, &#x27;&#x27;, this.httpOptions ). subscribe (
            (res: any) &#x3D;&gt; {
                this.snackBar.open(&#x27;SE HA HA BORRADO EL DOCTO&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
                this.dataDoc.splice(i,1);
                console.log(&quot;AQUI ENTRO LAS RESPUESTA DEL BORRADO&quot;);
                console.log(res);
            },
            (error) &#x3D;&gt; {
                this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            });
    }

    /**
     * Actualiza los datos relacionados con el documento.
     */
    updateDocto(){
        this.canSend &#x3D; true;
        const payload &#x3D; {
            &quot;documento&quot;: {
                idDocumetoDigital: this.idDocumento,
                descripcion: this.dataDocumento.descripcion,        
                fecha: moment(this.dataDocumento.fecha).format(&quot;DD-MM-YYYY&quot;),
                lugar: this.dataDocumento.lugar,
                eliminados: null,
                documentos: this.dataDocumento.archivos
            }
        };
        
        
        console.log(JSON.stringify(payload));
        this.http.post( this.endpoint + &#x27;actualizarDocumentos&#x27;, payload, this.httpOptions ). subscribe (
            (res: any) &#x3D;&gt; {
                if(res &#x3D;&#x3D;&#x3D; true){
                    this.snackBar.open(&#x27;SE HA ACTUALIZADO CORRECTAMENTE LA INFORMACIÓN&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                    console.log(&quot;RESPUESTA DE LA ACTUALIZACIÓN&quot;);
                    console.log(res);
                }else{
                    this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            },
            (error) &#x3D;&gt; {
                this.snackBar.open(&#x27;ERROR INTENTELO MÁS TARDE&#x27;, &#x27;Cerrar&#x27;, {
                    duration: 10000,
                    horizontalPosition: &#x27;end&#x27;,
                    verticalPosition: &#x27;top&#x27;
                });
            });
    }
}

///////////////NOTARIO////////////////
export interface Filtros {
    numnotario: string;
    estado: number;
    rfc: string;
    curp: string;
    claveife: string;
    nombre: string;
    filtroNombre: number;
    apellidoPaterno: string;
    filtroApellidoPaterno: number;
    apellidoMaterno: string;
    filtroApellidoMaterno: number;
}

export interface Notario {
    id: number;
    numero: string;
    ciudad: string;
    nombre: string;
}

@Component({
    selector: &#x27;app-dialog-notario&#x27;,
    templateUrl: &#x27;app-dialog-notario.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogNotarioSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/getNotariosByDatosIdentificativos&#x27;;
    endpointCatalogos &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    pageSize &#x3D; 15;
    pagina &#x3D; 1;
    total &#x3D; 0;
    loading &#x3D; false;
    dataSource &#x3D; [];
    dataNotarios &#x3D; [];
    displayedColumns: string[] &#x3D; [&#x27;numero&#x27;, &#x27;datos_personales&#x27;, &#x27;datos_identificativos&#x27;, &#x27;select&#x27;];
    httpOptions;
    filtros: Filtros &#x3D; {} as Filtros;
    notario: Notario &#x3D; {} as Notario;
    tipoBusqueda &#x3D; &#x27;DatosIdentificativos&#x27;;
    optionNotario;
    isBusqueda;
    queryParamFiltros;
    loadingEstados &#x3D; false;
    estados;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
  
    constructor(
        private auth: AuthService,
        private http: HttpClient,
        public dialogRef: MatDialogRef&lt;DialogNotarioSociedad&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {
        dialogRef.disableClose &#x3D; true;
  
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
                &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                Authorization: this.auth.getSession().token
            })
        };

        this.getDataEstados();
    }

    getDataEstados(): void {
        this.loadingEstados &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getEstados&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingEstados &#x3D; false;
                this.estados &#x3D; res;
            },
            (error) &#x3D;&gt; {
                this.loadingEstados &#x3D; false;
            }
        );
    }

    getDataNotarios(): void {
        this.loading &#x3D; true;
        this.isBusqueda &#x3D; true;
        this.optionNotario &#x3D; undefined;
        this.pagina &#x3D; 1;
        this.queryParamFiltros &#x3D; &#x27;&#x27;;
        
        if(this.filtros.numnotario){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;numnotario&#x3D;&#x27; + this.filtros.numnotario;
        }
        if(this.filtros.estado){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;estado&#x3D;&#x27; + this.filtros.estado;
        }
        if(this.filtros.rfc){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;rfc&#x3D;&#x27; + this.filtros.rfc;
        }
        if(this.filtros.curp){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;curp&#x3D;&#x27; + this.filtros.curp;
        }
        if(this.filtros.claveife){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;claveife&#x3D;&#x27; + this.filtros.claveife;
        }
        if(this.filtros.nombre){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;nombre&#x3D;&#x27; + this.filtros.nombre + &#x27;&amp;filtroNombre&#x3D;0&#x27;;
        }
        if(this.filtros.apellidoPaterno){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;apellidoPaterno&#x3D;&#x27; + this.filtros.apellidoPaterno + &#x27;&amp;filtroApellidoPaterno&#x3D;0&#x27;;
        }
        if(this.filtros.apellidoMaterno){
            this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;apellidoMaterno&#x3D;&#x27; + this.filtros.apellidoMaterno + &#x27;&amp;filtroApellidoMaterno&#x3D;0&#x27;;
        }
        
        this.http.post(this.endpoint + &#x27;?&#x27; + this.queryParamFiltros, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loading &#x3D; false;
                this.dataNotarios &#x3D; res;
                this.dataSource &#x3D; this.paginate(this.dataNotarios, this.pageSize, this.pagina);
                this.total &#x3D; this.dataNotarios.length;
                this.paginator.pageIndex &#x3D; 0;
            },
            (error) &#x3D;&gt; {
                this.loading &#x3D; false;
                this.dataSource &#x3D; [];
            });
    }
    
    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataSource &#x3D; this.paginate(this.dataNotarios, this.pageSize, this.pagina);
    }

    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    
    clean(): void {
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataNotarios &#x3D; [];
        this.filtros &#x3D; {} as Filtros;
        this.notario &#x3D; {} as Notario;
        this.optionNotario &#x3D; undefined;
        this.isBusqueda &#x3D; false;
    }

    /**
     * 
     * @param element Arreglo de los datos del registro seleccionado.
     */
    notarioSelected(element) {
        this.notario.id &#x3D; element.IDPERSONA;
        this.notario.numero &#x3D; element.NUMNOTARIO;
        this.notario.ciudad &#x3D; element.ESTADO;
        this.notario.nombre &#x3D; element.NOMBRE + &#x27; &#x27; + element.APELLIDOPATERNO + &#x27; &#x27; + element.APELLIDOMATERNO;
    }
}
  
///////////////PERSONA////////////////
export interface Filtros {
    apaterno: string;
    amaterno: string;
    nombre: string;
    rfc: string;
    curp: string;
    ine: string;
    idDocIdent: string;
    docIdent: string;
}
export interface Persona {
    tipoPersona: string;
    id: string;
    nombre: string;
    apaterno: string;
    amaterno: string;
    rfc: string;
    curp: string;
    ine: string;
    idDocIdent: number;
    docIdent: string;
}
@Component({
    selector: &#x27;app-dialog-persona&#x27;,
    templateUrl: &#x27;app-dialog-persona.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogPersonaSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    pageSize &#x3D; 15;
    pagina &#x3D; 1;
    total &#x3D; 0;
    loading &#x3D; false;
    dataSource &#x3D; [];
    dataPersonas &#x3D; [];
    displayedColumns: string[] &#x3D; [&#x27;nombre&#x27;, &#x27;datos_identificativos&#x27;, &#x27;select&#x27;];
    httpOptions;
    filtros: Filtros &#x3D; {} as Filtros;
    persona: Persona &#x3D; {} as Persona;
    tipoPersona;
    isIdentificativo;
    optionPersona;
    isBusqueda;
    queryParamFiltros;
    endpointBusqueda;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;
  
    constructor(
      private auth: AuthService,
      private http: HttpClient,
      public dialogRef: MatDialogRef&lt;DialogPersonaSociedad&gt;,
      @Inject(MAT_DIALOG_DATA) public data: any
    ) {

        dialogRef.disableClose &#x3D; true;
        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
                &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                Authorization: this.auth.getSession().token
            })
        };
        this.tipoPersona &#x3D; data;
        console.log(&quot;aca el tipo person &quot; + data);
        console.log(this.tipoPersona);
      }

    /**
     * 
     * @param isIdentificativo Valor booleano
     */
    clearInputsIdentNoIdent(isIdentificativo): void {
        this.isIdentificativo &#x3D; isIdentificativo;
        if(this.isIdentificativo){
            this.filtros.apaterno &#x3D; null;
            this.filtros.amaterno &#x3D; null;
            this.filtros.nombre &#x3D; null;
        }else{
            this.filtros.rfc &#x3D; null;
            this.filtros.curp &#x3D; null;
            this.filtros.ine &#x3D; null;
            this.filtros.idDocIdent &#x3D; null;
            this.filtros.docIdent &#x3D; null;
        }
    }
  
    getDataPersonas(): void {
        this.loading &#x3D; true;
        this.isBusqueda &#x3D; true;
        this.optionPersona &#x3D; undefined;
        this.pagina &#x3D; 1;
        this.queryParamFiltros &#x3D; &#x27;&#x27;;
        this.endpointBusqueda &#x3D; &#x27;&#x27;;
        
        if(this.tipoPersona &#x3D;&#x3D; &#x27;M&#x27;){
            if(this.isIdentificativo){
                this.endpointBusqueda &#x3D; this.endpoint + &#x27;getMoralIdentificativos&#x27;;
            if(this.filtros.rfc)
                this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;rfc&#x3D;&#x27; + this.filtros.rfc;
            } else {
                this.endpointBusqueda &#x3D; this.endpoint + &#x27;getPersonaMoral&#x27;;
            if(this.filtros.nombre)
                this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;razonSocial&#x3D;&#x27; + this.filtros.nombre + &#x27;&amp;filtroApellidoPaterno&#x3D;0&#x27;;
            }
        } else {
            if(this.isIdentificativo){
                this.endpointBusqueda &#x3D; this.endpoint + &#x27;getIdentificativos&#x27;;
                if(this.filtros.curp)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;curp&#x3D;&#x27; + this.filtros.curp;
                if(this.filtros.rfc)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;rfc&#x3D;&#x27; + this.filtros.rfc;
                if(this.filtros.ine)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;claveife&#x3D;&#x27; + this.filtros.ine;
                if(this.filtros.idDocIdent)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;iddocidentif&#x3D;&#x27; + this.filtros.idDocIdent;
                if(this.filtros.docIdent)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;valdocidentif&#x3D;&#x27; + this.filtros.docIdent;
        
                this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;coincidenTodos&#x3D;false&#x27;;        
            } else {
                this.endpointBusqueda &#x3D; this.endpoint + &#x27;getContribuyente&#x27;;
                if(this.filtros.nombre)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;nombre&#x3D;&#x27; + this.filtros.nombre + &#x27;&amp;filtroNombre&#x3D;0&#x27;;
                if(this.filtros.apaterno)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;apellidoPaterno&#x3D;&#x27; + this.filtros.apaterno + &#x27;&amp;filtroApellidoPaterno&#x3D;0&#x27;;
                if(this.filtros.amaterno)
                    this.queryParamFiltros &#x3D; this.queryParamFiltros + &#x27;&amp;apellidoMaterno&#x3D;&#x27; + this.filtros.amaterno + &#x27;&amp;filtroApellidoMaterno&#x3D;0&#x27;;
            }
        }
  
        this.http.post(this.endpointBusqueda + &#x27;?&#x27; + this.queryParamFiltros, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loading &#x3D; false;
                this.dataPersonas &#x3D; res;
                this.dataSource &#x3D; this.paginate(this.dataPersonas, this.pageSize, this.pagina);
                this.total &#x3D; this.dataPersonas.length;
                this.paginator.pageIndex &#x3D; 0;
            },
            (error) &#x3D;&gt; {
                this.loading &#x3D; false;
                this.dataSource &#x3D; [];
            }
        );
    }
  
    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataSource &#x3D; this.paginate(this.dataPersonas, this.pageSize, this.pagina);
    }
  
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }
  
    clean(): void {
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataPersonas &#x3D; [];
        this.filtros &#x3D; {} as Filtros;
        this.persona &#x3D; {} as Persona;
        this.optionPersona &#x3D; undefined;
        this.isBusqueda &#x3D; false;
    }
  
    personaSelected(element) {
        this.persona.tipoPersona &#x3D; this.tipoPersona;
        this.persona.id &#x3D; element.IDPERSONA;
        this.persona.nombre &#x3D; element.NOMBRE;
        this.persona.apaterno &#x3D; element.APELLIDOPATERNO;
        this.persona.amaterno &#x3D; element.APELLIDOMATERNO;
        this.persona.rfc &#x3D; element.RFC;
        this.persona.curp &#x3D; element.CURP;
        this.persona.ine &#x3D; element.CLAVEIFE;
        this.persona.idDocIdent &#x3D; element.IDDOCIDENTIF;
        this.persona.docIdent &#x3D; element.VALDOCIDENTIF;
    }
}

///////////////BUSCAR PERSONA SOCIEDAD////////////////
export interface DatosPeritoPersona {
    apepaterno: string;
    apematerno: string;
    nombre: string;
    rfc: string;
    curp: string;
    ine: string;
    identificacion: number;
    idedato: string;
    fecha_naci: Date;
    fecha_def: Date;
    celular: string;
    email: string;
    idperito: string;
}
@Component({
    selector: &#x27;app-dialog-buscaPerito&#x27;,
    templateUrl: &#x27;app-dialog-buscaPerito.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogSociedadPerito {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    displayedColumns: string[] &#x3D; [&#x27;nombre&#x27;, &#x27;datos&#x27;, &#x27;select&#x27;];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 15;
    loading &#x3D; false;
    dataSource &#x3D; [];
    dataPaginate;
    httpOptions;
    nombrePerito;
    filtroNombre;
    search &#x3D; false;
    appaterno;
    apmaterno
    nombre;
    rfc;
    curp;
    ine;
    registro;
    identificacion;
    idedato;
    isIdentificativo;
    optionPeritoPersona;
    idperito: number;
    datoPeritoPersona: DatosPeritoPersona &#x3D; {} as DatosPeritoPersona;
    @ViewChild(&#x27;paginator&#x27;) paginator: MatPaginator;

    constructor(
        private auth: AuthService,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialogRef: MatDialogRef&lt;DialogSociedadPerito&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any){
            dialogRef.disableClose &#x3D; true;
            this.httpOptions &#x3D; {
                headers: new HttpHeaders({
                    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                    Authorization: this.auth.getSession().token
                })
            };
        }

    validateSearchBuscaP(){
        this.search &#x3D; (
            this.appaterno ||
            this.apmaterno ||
            this.nombre ||
            this.rfc ||
            this.curp ||
            this.ine ||
            this.registro ||
            this.identificacion ||
            this.idedato
        ) ? true : false;
    }

    clearInputsIdentNoIdent2(isIdentificativo): void {
        this.isIdentificativo &#x3D; isIdentificativo;
        if(this.isIdentificativo){
            this.appaterno &#x3D; null;
            this.apmaterno &#x3D; null;
            this.nombre &#x3D; null;            
        }else{
            this.rfc &#x3D; null;
            this.curp &#x3D; null;
            this.ine &#x3D; null;
            this.registro &#x3D; null;
            this.identificacion &#x3D; null;
            this.idedato &#x3D; null;
        }
    }

    cleanBusca(): void{
        this.pagina &#x3D; 1;
        this.total &#x3D; 0;
        this.dataSource &#x3D; [];
        this.loading &#x3D; false;
        this.dataPaginate;
    }

    getPerito2(){
        let query &#x3D; &#x27;&#x27;;
        let busquedaDatos &#x3D; &#x27;&#x27;;

        if(this.nombre){
            query &#x3D; query + &#x27;&amp;nombre&#x3D;&#x27; + this.nombre + &#x27;&amp;filtroNombre&#x3D;0&#x27;;
        }
        if(this.appaterno){
            query &#x3D; query + &#x27;&amp;apellidoPaterno&#x3D;&#x27; + this.appaterno + &#x27;&amp;filtroApellidoPaterno&#x3D;0&#x27;;
        }
        if(this.apmaterno){
            query &#x3D; query + &#x27;&amp;apellidoMaterno&#x3D;&#x27; + this.apmaterno + &#x27;&amp;filtroApellidoMaterno&#x3D;0&#x27;;
        }
        if(this.curp){
            query &#x3D; query + &#x27;&amp;curp&#x3D;&#x27; + this.curp;
        }
        if(this.rfc){
            query &#x3D; query + &#x27;&amp;rfc&#x3D;&#x27; + this.rfc;
        }
        if(this.ine){
            query &#x3D; query + &#x27;&amp;ine&#x3D;&#x27; + this.ine;
        }
        if(this.registro){
            query &#x3D; query + &#x27;&amp;registro&#x3D;&#x27; + this.registro;
        }
        if(this.identificacion &amp;&amp; this.idedato){
            query &#x3D; query + &#x27;&amp;iddocidentif&#x3D;&#x27; + this.identificacion + &#x27;&amp;valdocidentif&#x3D;&#x27; + this.idedato;
        }

        if( this.isIdentificativo ){
            busquedaDatos &#x3D; busquedaDatos + &#x27;getPeritosByDatosIdentificativos&#x27;;
            //query &#x3D; query + &#x27;&amp;coincidenTodos&#x3D;false&#x27;;
        }else{
            busquedaDatos &#x3D; busquedaDatos + &#x27;getPeritosByDatosPersonales&#x27;;
        }

        query &#x3D; query.substr(1);

        console.log(this.endpoint + busquedaDatos + &#x27;?&#x27; + query);
        this.loading &#x3D; true;
        this.http.post(this.endpoint + busquedaDatos + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.dataSource &#x3D; res;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
                    this.total &#x3D; this.dataSource.length; 
                    this.paginator.pageIndex &#x3D; 0;
                    console.log(this.dataSource);
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    peritoPersonaSelected(element){
        console.log(element);
        this.datoPeritoPersona.idperito &#x3D; element.IDPERITO;
        this.datoPeritoPersona.nombre &#x3D; element.NOMBRE;
        this.datoPeritoPersona.apepaterno &#x3D; element.APELLIDOPATERNO;
        this.datoPeritoPersona.apematerno &#x3D; element.APELLIDOMATERNO;
        this.datoPeritoPersona.rfc &#x3D; element.RFC;
        this.datoPeritoPersona.curp &#x3D; element.CURP;
        this.datoPeritoPersona.ine &#x3D; element.CLAVEIFE;
        this.datoPeritoPersona.identificacion &#x3D; element.IDDOCIDENTIF;
        this.datoPeritoPersona.idedato &#x3D; element.DESCDOCIDENTIF;
        this.datoPeritoPersona.fecha_naci &#x3D; element.FECHANACIMIENTO;
        this.datoPeritoPersona.fecha_def &#x3D; element.FECHADEFUNCION;
        this.datoPeritoPersona.celular &#x3D; element.CELULAR;
        this.datoPeritoPersona.email &#x3D; element.EMAIL;
    }
}

///////////////HISTORIAL DE REPRESENTACIONES////////////////
export interface DataHistoricoRep{
    fecha_desde: Date;
    fecha_hasta: Date;
}

@Component({
    selector: &#x27;app-dialog-historialRep&#x27;,
    templateUrl: &#x27;app-dialog-historialRep.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogHistorialRepS {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    httpOptions;
    dataDoc &#x3D; [];
    displayedColumns: string[] &#x3D; [&#x27;fecha&#x27;, &#x27;descripcion&#x27;, &#x27;numero_expediente&#x27;, &#x27;tipo_tramite&#x27;, &#x27;tipo_subtramite&#x27;, &#x27;detalle&#x27;];
    dataHistoricoRep: DataHistoricoRep &#x3D; {} as DataHistoricoRep;
    dataSource &#x3D; [];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 10;
    dataPaginate;
    loadingH &#x3D; true;
    idPersona;
    idChs;

    constructor(
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        private snackBar: MatSnackBar,
        public dialog: MatDialog,
        private auth: AuthService,
        public dialogRef: MatDialogRef&lt;DialogHistorialRepS&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {

        dialogRef.disableClose &#x3D; true;

        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
              &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
              Authorization: this.auth.getSession().token
            })
        };

        console.log(&quot;ACA EL EL HISTORIAL&quot;);
        console.log(data);
        this.idPersona &#x3D; data;
        this.getHistorialRepresentacion();
    }

    getHistorialRepresentacion(){
        let query &#x3D; &#x27;&#x27;;
      

        query &#x3D; &#x27;idPersona&#x3D;&#x27; + this.idPersona;
        query &#x3D; (this.dataHistoricoRep.fecha_desde) ? query + &#x27;&amp;fechaDesde&#x3D;&#x27; + moment(this.dataHistoricoRep.fecha_desde).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechaDesde&#x3D;&#x27;;
        query &#x3D; (this.dataHistoricoRep.fecha_hasta) ? query + &#x27;&amp;fechaHasta&#x3D;&#x27; + moment(this.dataHistoricoRep.fecha_hasta).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechaHasta&#x3D;&#x27;;


        this.loadingH &#x3D; true;
        let metodo &#x3D; &#x27;getHistoricosRepresentacion&#x27;;
        this.http.post(this.endpoint + metodo + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingH &#x3D; false;
                    this.dataSource &#x3D; res;
                    console.log(this.dataSource);
                    this.total &#x3D; this.dataSource.length;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, 10, this.pagina);
                },
                (error) &#x3D;&gt; {
                    this.loadingH &#x3D; false;
                    this.snackBar.open(&quot;Ha ocurrido un problema al obtener el historial&quot;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    historicoDetalle(element){
        console.log(&quot;ACA EL IDCSH&quot;);
        console.log(element);
        this.idChs &#x3D; element;
        const dialogRef &#x3D; this.dialog.open(DialogHistorialRepDetalleS, {
            width: &#x27;700px&#x27;,
            data: this.idChs
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
            }
        });
    }

}

///////////////HISTORIAL DE REPRESENTACIONES DETALLE////////////////
export interface DataHistoricoRep{
    fecha_desde: Date;
    fecha_hasta: Date;
}

@Component({
    selector: &#x27;app-dialog-historialRepDetalle&#x27;,
    templateUrl: &#x27;app-dialog-historialRepDetalle.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
})
export class DialogHistorialRepDetalleS {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    httpOptions;
    dataDoc &#x3D; [];
    loadingH &#x3D; false;
    insUp &#x3D; true;
    idChs;
    fisicaFormGroup: FormGroup;
    moralFormGroup: FormGroup;
    dataRepresentacion;
    tipoPersonaRep;
    tipoPersonaRepdo;
    nombreR;
    apaternoR;
    amaternoR;
    rfcR;
    curpR;
    ineR;
    idDocIdentR;
    docIdentR;
    fechaNacimientoR;
    fechaDefuncionR;
    celularR;
    emailR;
    actPreponderanteR;
    idTipoPersonaMoralR;
    fechaInicioOperacionR;
    idMotivoR;
    fechaCambioR;
    nombreRdo;
    apaternoRdo;
    amaternoRdo;
    rfcRdo;
    curpRdo;
    ineRdo;
    idDocIdentRdo;
    docIdentRdo;
    fechaNacimientoRdo;
    fechaDefuncionRdo;
    celularRdo;
    emailRdo;
    actPreponderanteRdo;
    idTipoPersonaMoralRdo;
    fechaInicioOperacionRdo;
    idMotivoRdo;
    fechaCambioRdo;
    texto;
    fechaCaducidad;
    tipoDj;
    constructor(
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        private snackBar: MatSnackBar,
        public dialog: MatDialog,
        private auth: AuthService,
        public dialogRef: MatDialogRef&lt;DialogHistorialRepDetalleS&gt;,
        @Inject(MAT_DIALOG_DATA) public data: any
    ) {

        dialogRef.disableClose &#x3D; true;

        this.httpOptions &#x3D; {
            headers: new HttpHeaders({
              &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
              Authorization: this.auth.getSession().token
            })
        };

        console.log(&quot;ACA EL EL HISTORIAL&quot;);
        console.log(data);
        this.idChs &#x3D; data;
        this.getHistorialRepresentacionDetalle();
    }

    getHistorialRepresentacionDetalle(){
        let query &#x3D; &#x27;&#x27;;

        query &#x3D; &#x27;idChs&#x3D;&#x27; + this.idChs;

        this.loadingH &#x3D; true;
        let metodo &#x3D; &#x27;getHistoricosRepresentacionDetalle&#x27;;
        this.http.post(this.endpoint + metodo + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingH &#x3D; false;
                    console.log(&quot;RESULTADO DEL DETALLE REP&quot;);
                    console.log(res);
                    this.dataRepresentacion &#x3D; res;
                    console.log(this.dataRepresentacion.infoRepresentante.CAUSA);
                    console.log(this.dataRepresentacion.infoRepresentante[0].CAUSA);
                    this.setDetalle();
                },
                (error) &#x3D;&gt; {
                    this.loadingH &#x3D; false;
                    this.snackBar.open(&quot;Ha ocurrido un problema al obtener el detalle&quot;, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    setDetalle(){
            console.log(&quot;ACA ENTRO EL SLECCIONADO REPRESENTACION&quot;);
            console.log(this.dataRepresentacion.infoRepresentante[0]);
            console.log(this.dataRepresentacion.infoDocumento.infoDocumento[0].codtipodocumentojuridico);
            //(this.dataRepresentacion.infoRepresentante[0].RFC) ? this.changeRequired(&#x27;curp&#x27;, &#x27;rfc&#x27;) : this.changeRequired(&#x27;rfc&#x27;, &#x27;curp&#x27;);

            ///////////////// DATOS DEL DOCUMENTO ////////////////////////
            if(this.dataRepresentacion.infoDocumento.infoDocumento[0].codtipodocumentojuridico &#x3D;&#x3D; &quot;CP&quot;){
                this.tipoDj &#x3D; &#x27;Carta Poder - &#x27; + moment(this.dataRepresentacion.infoDocumento.infoDocumento[0].codtipodocumentojuridico.fecha).format(&quot;DD-MM-YYYY&quot;);
            }else{
                this.tipoDj &#x3D; &#x27;Poder Notarial - &#x27; + moment(this.dataRepresentacion.infoDocumento.infoDocumento[0].codtipodocumentojuridico.fecha).format(&quot;DD-MM-YYYY&quot;);
            }
            this.texto &#x3D; this.dataRepresentacion.infoRepresentacion[0].textorepresentacion;
            this.fechaCaducidad &#x3D; ((this.dataRepresentacion.infoRepresentacion[0].fechacaducidad) ? new Date(this.dataRepresentacion.infoRepresentacion[0].fechacaducidad) : null);

            /////////////////////////////// REPRESENTANTE /////////////////////////////////
            this.tipoPersonaRep &#x3D; this.dataRepresentacion.infoRepresentante[0].CODTIPOSPERSONA;
            if(this.tipoPersonaRep &#x3D;&#x3D; &#x27;F&#x27;){
                this.nombreR &#x3D; this.dataRepresentacion.infoRepresentante[0].NOMBRE;
                this.apaternoR &#x3D; this.dataRepresentacion.infoRepresentante[0].APELLIDOMATERNO;
                this.amaternoR &#x3D; this.dataRepresentacion.infoRepresentante[0].APELLIDOPATERNO;
                this.rfcR &#x3D; this.dataRepresentacion.infoRepresentante[0].RFC;
                this.curpR &#x3D; this.dataRepresentacion.infoRepresentante[0].CURP;
                this.ineR &#x3D; this.dataRepresentacion.infoRepresentante[0].CLAVEIFE;
                this.idDocIdentR &#x3D; this.dataRepresentacion.infoRepresentante[0].IDDOCIDENTIF;
                this.docIdentR &#x3D; this.dataRepresentacion.infoRepresentante[0].DESCDOCIDENTIF;
                this.fechaNacimientoR &#x3D; ((this.dataRepresentacion.infoRepresentante[0].FECHANACIMIENTO) ? new Date(this.dataRepresentacion.infoRepresentante[0].FECHANACIMIENTO) : null);
                this.fechaDefuncionR &#x3D; ((this.dataRepresentacion.infoRepresentante[0].FECHADEFUNCION) ? new Date(this.dataRepresentacion.infoRepresentante[0].FECHADEFUNCION) : null);
                this.celularR &#x3D; this.dataRepresentacion.infoRepresentante[0].CELULAR;
                this.emailR &#x3D; this.dataRepresentacion.infoRepresentante[0].EMAIL;
                
            } else {
                this.nombreR &#x3D; this.dataRepresentacion.infoRepresentante[0].APELLIDOPATERNO;
                this.rfcR &#x3D; this.dataRepresentacion.infoRepresentante[0].RFC;
                this.actPreponderanteR &#x3D; this.dataRepresentacion.infoRepresentante[0].ACTIVPRINCIP;
                this.idTipoPersonaMoralR &#x3D; this.dataRepresentacion.infoRepresentante[0].IDTIPOMORAL;
                this.fechaInicioOperacionR &#x3D; ((this.dataRepresentacion.infoRepresentante[0].FECHAINICIOACTIV) ? new Date(this.dataRepresentacion.infoRepresentante[0].FECHAINICIOACTIV) : null);
                this.idMotivoR &#x3D; this.dataRepresentacion.infoRepresentante[0].IDMOTIVOSMORAL;
                this.fechaCambioR &#x3D; ((this.dataRepresentacion.infoRepresentante[0].FECHACAMBIOSITUACION) ? new Date(this.dataRepresentacion.infoRepresentante[0].FECHACAMBIOSITUACION) : null);
            }

            /////////////////////////////// REPRESENTADO /////////////////////////////////
            this.tipoPersonaRepdo &#x3D; this.dataRepresentacion.infoRepresentado[0].CODTIPOSPERSONA;
            if(this.tipoPersonaRepdo &#x3D;&#x3D; &#x27;F&#x27;){
                this.nombreRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].NOMBRE;
                this.apaternoRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].APELLIDOMATERNO;
                this.amaternoRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].APELLIDOPATERNO;
                this.rfcRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].RFC;
                this.curpRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].CURP;
                this.ineRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].CLAVEIFE;
                this.idDocIdentRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].IDDOCIDENTIF;
                this.docIdentRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].DESCDOCIDENTIF;
                this.fechaNacimientoRdo &#x3D; ((this.dataRepresentacion.infoRepresentado[0].FECHANACIMIENTO) ? new Date(this.dataRepresentacion.infoRepresentado[0].FECHANACIMIENTO) : null);
                this.fechaDefuncionRdo &#x3D; ((this.dataRepresentacion.infoRepresentado[0].FECHADEFUNCION) ? new Date(this.dataRepresentacion.infoRepresentado[0].FECHADEFUNCION) : null);
                this.celularRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].CELULAR;
                this.emailRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].EMAIL;
                
            } else {
                this.nombreRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].APELLIDOPATERNO;
                this.rfcRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].RFC;
                this.actPreponderanteRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].ACTIVPRINCIP;
                this.idTipoPersonaMoralRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].IDTIPOMORAL;
                this.fechaInicioOperacionRdo &#x3D; ((this.dataRepresentacion.infoRepresentado[0].FECHAINICIOACTIV) ? new Date(this.dataRepresentacion.infoRepresentado[0].FECHAINICIOACTIV) : null);
                this.idMotivoRdo &#x3D; this.dataRepresentacion.infoRepresentado[0].IDMOTIVOSMORAL;
                this.fechaCambioRdo &#x3D; ((this.dataRepresentacion.infoRepresentado[0].FECHACAMBIOSITUACION) ? new Date(this.dataRepresentacion.infoRepresentado[0].FECHACAMBIOSITUACION) : null);
            }
            
            
    }

  
}


/////////////// DOMICILIOS HISTORICO ////////////////
export interface DataHistorico{
    fecha_desde: Date;
    fecha_hasta: Date;
}

@Component({
    selector: &#x27;app-dialog-domicilio-historico-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-domicilio-historico-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
  })
  export class DialogDomicilioHistoricoSociedad {
    endpoint &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    httpOptions;
    idDireccion;
    displayedColumns: string[] &#x3D; [&#x27;fecha&#x27;, &#x27;descripcion&#x27;, &#x27;numero_expediente&#x27;, &#x27;tipo_tramite&#x27;, &#x27;tipo_subtramite&#x27;, &#x27;detalle&#x27;];
    dataHistoricoModificaciones: DataHistorico &#x3D; {} as DataHistorico;
    dataSource &#x3D; [];
    pagina &#x3D; 1;
    total &#x3D; 0;
    pageSize &#x3D; 10;
    dataPaginate;
    loading &#x3D; true;
    
    constructor(
        private auth: AuthService,
        private snackBar: MatSnackBar,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialogRef: MatDialogRef&lt;DialogDomicilioHistoricoSociedad&gt;,
        public dialog: MatDialog,
        @Inject(MAT_DIALOG_DATA) public data: any) {
            dialogRef.disableClose &#x3D; true;
            this.httpOptions &#x3D; {
                headers: new HttpHeaders({
                    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                    Authorization: this.auth.getSession().token
                })
            };
        
            this.idDireccion &#x3D; data.idDireccion;
            this.getHistoricoModificaciones();
    
        }

    getHistoricoModificaciones(){
        let query &#x3D; &#x27;&#x27;;
      
        query &#x3D; (this.dataHistoricoModificaciones.fecha_desde) ? query + &#x27;&amp;fechaDesde&#x3D;&#x27; + moment(this.dataHistoricoModificaciones.fecha_desde).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechaDesde&#x3D;&#x27;;
        query &#x3D; (this.dataHistoricoModificaciones.fecha_hasta) ? query + &#x27;&amp;fechaHasta&#x3D;&#x27; + moment(this.dataHistoricoModificaciones.fecha_hasta).format(&#x27;DD-MM-YYYY&#x27;) : query + &#x27;&amp;fechaHasta&#x3D;&#x27;;
        query &#x3D; query + &#x27;&amp;idDireccion&#x3D;&#x27; + this.idDireccion;

        query &#x3D; query.substr(1);

        this.loading &#x3D; true;
        let metodo &#x3D; &#x27;getHistoricosDireccion&#x27;;
        this.http.post(this.endpoint + metodo + &#x27;?&#x27; + query, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.dataSource &#x3D; res;
                    console.log(this.dataSource);
                    this.total &#x3D; this.dataSource.length;
                    this.dataPaginate &#x3D; this.paginate(this.dataSource, 10, this.pagina);
                },
                (error) &#x3D;&gt; {
                    this.loading &#x3D; false;
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * Método del paginado que nos dira la posición del paginado y los datos a mostrar
     * @param evt Nos da la referencia de la pagina en la que se encuentra
     */
    paginado(evt): void{
        this.pagina &#x3D; evt.pageIndex + 1;
        this.dataPaginate &#x3D; this.paginate(this.dataSource, this.pageSize, this.pagina);
    }
    
    /**
     * 
     * @param array Contiene el arreglo con los datos que se pintaran en la tabla.
     * @param page_size Valor de la cantidad de registros que se pintaran por página.
     * @param page_number Valor de la página en la cual se encuentra el paginado.
     * @returns 
     */
    paginate(array, page_size, page_number) {
        return array.slice((page_number - 1) * page_size, page_number * page_size);
    }

    /**
     * 
     * @param dataDomicilioEspecifico Valor del registro seleccionado.
     */
    viewHistoricoDomicilioEspecifico(dataDomicilioEspecifico): void {
        const dialogRef &#x3D; this.dialog.open(DialogDomicilioHistoricoEspecificoSociedad, {
            width: &#x27;700px&#x27;,
            data: { dataDomicilioEspecifico:dataDomicilioEspecifico, idDireccion:this.idDireccion },
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
                // this.getNotarioDirecciones();
        });
    }


  }




/////////////// DOMICILIOS HISTORICO ESPECIFICO ////////////////

@Component({
    selector: &#x27;app-dialog-domicilio-historico-especifico-sociedad&#x27;,
    templateUrl: &#x27;app-dialog-domicilio-historico-especifico-sociedad.html&#x27;,
    styleUrls: [&#x27;./editar-sociedad.component.css&#x27;]
  })
  export class DialogDomicilioHistoricoEspecificoSociedad {
    endpointCatalogos &#x3D; environment.endpoint + &#x27;registro/&#x27;;
    //loadingTiposDireccion &#x3D; false;
    loadingEstados &#x3D; false;
    loadingMunicipios &#x3D; false;
    loadingTiposAsentamiento &#x3D; false;
    loadingTiposVia &#x3D; false;
    loadingTiposLocalidad &#x3D; false;
    httpOptions;
    tiposDireccion;
    estados;
    municipios;
    tiposAsentamiento;
    tiposVia;
    tiposLocalidad;
    optionCiudad;
    codtiposdireccion;
    idestadoNg
    idmunicipioNg
    idmunicipio2Ng
    municipioNg
    idciudadNg
    ciudadNg
    codasentamientoNg
    asentamientoNg
    idtipoasentamientoNg
    cpNg
    codtiposviaNg
    idtipoviaNg
    viaNg
    idtipolocalidadNg
    nexteriorNg
    entrecalle1Ng
    entrecalle2Ng
    andadorNg
    edificioNg
    seccionNg
    entradaNg
    ninteriorNg
    telefonoNg
    adicionalNg
    botonAsentamiento &#x3D; true;
    botonCiudad &#x3D; true;
    botonMunicipio &#x3D; true;
    botonVia &#x3D; true;
    buscaMunicipios;
    domicilioFormGroup: FormGroup;
    dataDomicilio: DataDomicilio &#x3D; {} as DataDomicilio;
    dataDomicilioEspecifico: DataDomicilio &#x3D; {} as DataDomicilio;
    loadingDireccionEspecifica &#x3D; false;
    iddomicilio;
    idChs;
    idDireccion;

    constructor(
        private auth: AuthService,
        private snackBar: MatSnackBar,
        private http: HttpClient,
        private _formBuilder: FormBuilder,
        public dialogRef: MatDialogRef&lt;DialogDomicilioHistoricoEspecificoSociedad&gt;,
        public dialog: MatDialog,
        @Inject(MAT_DIALOG_DATA) public data: any) {
            dialogRef.disableClose &#x3D; true;
            this.httpOptions &#x3D; {
                headers: new HttpHeaders({
                    &#x27;Content-Type&#x27;: &#x27;application/json&#x27;,
                    Authorization: this.auth.getSession().token
                })
            };

            this.idChs &#x3D; data.dataDomicilioEspecifico;
            this.idDireccion &#x3D; data.idDireccion;
            console.log(this.idChs);
            console.log(this.idDireccion);
            this.codtiposdireccion &#x3D; data.codtiposdireccion;
            this.dataDomicilio &#x3D; {} as DataDomicilio;
            this.dataDomicilioEspecifico &#x3D; {} as DataDomicilio;
            this.getDataEstados();
            this.getDireccionEspecifica();
                this.domicilioFormGroup &#x3D; this._formBuilder.group({
                    ///idtipodireccion: [&#x27;&#x27;, Validators.required],
                    idestado: [&#x27;&#x27;, Validators.required],
                    delegacion: [null],
                    municipio: [null, Validators.required],
                    idciudad: [null],
                    ciudad: [null, Validators.required],
                    codasentamiento: [null, Validators.required],
                    asentamiento: [null, Validators.required],
                    idtipoasentamiento: [null],
                    codtiposvia: [null],
                    idtipovia: [&#x27;&#x27;, Validators.required],
                    via: [null, Validators.required],
                    idtipolocalidad: [null],
                    cp: [null],
                    nexterior: [null, Validators.required],
                    entrecalle1: [null],
                    entrecalle2: [null],
                    andador: [null],
                    edificio: [null],
                    seccion: [null],
                    entrada: [null],
                    ninterior: [null],
                    telefono: [null],
                    adicional: [null],
                    id_direccion: [null]
                });
            
                this.domicilioFormGroup.controls.idestado.valueChanges.subscribe(idestado &#x3D;&gt; {
                    if(idestado &#x3D;&#x3D; 9) {
                        this.domicilioFormGroup.removeControl(&#x27;municipio&#x27;);
                        this.domicilioFormGroup.removeControl(&#x27;idciudad&#x27;);
                        this.domicilioFormGroup.removeControl(&#x27;ciudad&#x27;);
                        this.domicilioFormGroup.addControl(&#x27;idmunicipio&#x27;, new FormControl(&#x27;&#x27;, Validators.required));
                        this.domicilioFormGroup.removeControl(&#x27;idmunicipio2&#x27;);
                    } else {
                        this.domicilioFormGroup.removeControl(&#x27;idmunicipio&#x27;);
                        this.domicilioFormGroup.addControl(&#x27;municipio&#x27;, new FormControl(null, Validators.required));
                        this.domicilioFormGroup.addControl(&#x27;idciudad&#x27;, new FormControl(null, Validators.required));
                        this.domicilioFormGroup.addControl(&#x27;ciudad&#x27;, new FormControl(null, Validators.required));
                        this.domicilioFormGroup.addControl(&#x27;idmunicipio2&#x27;, new FormControl(&#x27;&#x27;, Validators.required));
                    }
                    this.domicilioFormGroup.updateValueAndValidity();
                });
        
                    if(data){
                        console.log(data.dataDomicilioEspecifico);
                        console.log(&quot;recibimos data seteado1&quot;);
                        // this.domicilioFormGroup[&#x27;cp&#x27;].disable();
                    }
                    this.getDataTiposAsentamiento();
                    this.getDataTiposVia();
                    this.getDataTiposLocalidad();
        }

    getDireccionEspecifica(){
        console.log(&#x27;entro&#x27;);
        this.loadingDireccionEspecifica &#x3D; true;
        let metodo &#x3D; &#x27;getHistoricosDireccionDetalle&#x27;;
        this.http.post(this.endpointCatalogos + metodo + &#x27;?idChs&#x3D;&#x27; + this.idChs + &#x27;&amp;idDireccion&#x3D;&#x27; + this.idDireccion, &#x27;&#x27;, this.httpOptions)
            .subscribe(
                (res: any) &#x3D;&gt; {
                    this.loadingDireccionEspecifica &#x3D; false;
                    this.dataDomicilioEspecifico &#x3D; res;
                    this.setDataDomicilio(this.dataDomicilioEspecifico[0]);
                    console.log(&#x27;domicilio único encontrado&#x27;);
                    console.log(this.dataDomicilioEspecifico);
                },
                (error) &#x3D;&gt; {
                    this.loadingDireccionEspecifica &#x3D; false;
                    console.log(&#x27;no furula&#x27;);
                    this.snackBar.open(error.error.mensaje, &#x27;Cerrar&#x27;, {
                        duration: 10000,
                        horizontalPosition: &#x27;end&#x27;,
                        verticalPosition: &#x27;top&#x27;
                    });
                }
            );
    }

    /**
     * 
     * @param event Contiene el nombre de la etiqueta option de acuerdo al valor de este en el select.
     */
    getNombreDel(event): void {
        this.dataDomicilio.delegacion &#x3D; event.source.triggerValue;
        this.botonAsentamiento &#x3D; false;
        
    }

    getDataEstados(): void {
        this.loadingEstados &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getEstados&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingEstados &#x3D; false;
                this.estados &#x3D; res;
            },
            (error) &#x3D;&gt; {
                this.loadingEstados &#x3D; false;
            }
        );
    }

    /**
     * 
     * @param event Valor que se recibe para la obtención de las alcaldias o municipios.
     */
    getDataMunicipios(event): void {
        this.botonMunicipio &#x3D; false;
        let busquedaMunCol &#x3D; &#x27;&#x27;;
        // busquedaMunCol &#x3D; &#x27;getDelegaciones&#x27;;
        busquedaMunCol &#x3D; (event.value &#x3D;&#x3D; 9) ? &#x27;getDelegaciones&#x27; : &#x27;getMunicipiosByEstado?codEstado&#x3D;&#x27; + event.value;
        this.loadingMunicipios &#x3D; true;
        this.http.post(this.endpointCatalogos + busquedaMunCol, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingMunicipios &#x3D; false;
                this.municipios &#x3D; res;
                console.log(&#x27;GETDELEG&#x27;);
                console.log(res);
            },
            (error) &#x3D;&gt; {
                this.loadingMunicipios &#x3D; false;
            }
        );
    }
    
    getDataTiposAsentamiento(): void {
        this.loadingTiposAsentamiento &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getTiposAsentamiento&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingTiposAsentamiento &#x3D; false;
                this.tiposAsentamiento &#x3D; res;
                console.log(&#x27;AQUI EL ASENTAMIENTO SELECT&#x27;);
                console.log(this.tiposAsentamiento);
            },
            (error) &#x3D;&gt; {
                this.loadingTiposAsentamiento &#x3D; false;
            }
        );
    }
    
    getDataTiposVia(): void {
        this.loadingTiposVia &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getTiposVia&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingTiposVia &#x3D; false;
                this.tiposVia &#x3D; res;
                console.log(&#x27;AQUI EL TIPOS VIA SELECT&#x27;);
                console.log(this.tiposVia);
                console.log(this.codtiposdireccion);
            },
            (error) &#x3D;&gt; {
                this.loadingTiposVia &#x3D; false;
            }
        );
    }
    
    getDataTiposLocalidad(): void {
        this.loadingTiposLocalidad &#x3D; true;
        this.http.post(this.endpointCatalogos + &#x27;getTiposLocalidad&#x27;, &#x27;&#x27;, this.httpOptions).subscribe(
            (res: any) &#x3D;&gt; {
                this.loadingTiposLocalidad &#x3D; false;
                this.tiposLocalidad &#x3D; res;
                console.log(&#x27;AQUI EL TIPOS LOCALIDAD&#x27;);
                console.log(this.tiposLocalidad);
            },
            (error) &#x3D;&gt; {
                this.loadingTiposLocalidad &#x3D; false;
            }
        );
    }

    /**
     * 
     * @param data Arreglo con los datos del registro seleccionado.
     */
    setDataDomicilio(data): void {
        console.log(&quot;ACA EL COD DATA ESPE&quot;);
        console.log(data);
        // console.log(&quot;ACA EL COD ESTADO SETEADO&quot;+data.dataDomicilioEspecifico.CODESTADO);
       
        this.domicilioFormGroup.controls[&#x27;idestado&#x27;].setValue(data.CODESTADO);
        this.getDataMunicipios({value: this.domicilioFormGroup.value.idestado});
        this.domicilioFormGroup.controls[&#x27;codasentamiento&#x27;].setValue(data.IDCOLONIA);
        this.domicilioFormGroup.controls[&#x27;idtipoasentamiento&#x27;].setValue(data.CODTIPOSASENTAMIENTO);
        this.domicilioFormGroup.controls[&#x27;asentamiento&#x27;].setValue(data.COLONIA);
        this.domicilioFormGroup.controls[&#x27;codtiposvia&#x27;].setValue(data.CODTIPOSVIA);
        this.domicilioFormGroup.controls[&#x27;idtipovia&#x27;].setValue(data.IDVIA);
        this.domicilioFormGroup.controls[&#x27;via&#x27;].setValue(data.VIA);
        this.domicilioFormGroup.controls[&#x27;idtipolocalidad&#x27;].setValue(data.CODTIPOSLOCALIDAD);
        this.domicilioFormGroup.controls[&#x27;cp&#x27;].setValue(data.CODIGOPOSTAL);
        this.domicilioFormGroup.controls[&#x27;nexterior&#x27;].setValue(data.NUMEROEXTERIOR);
        this.domicilioFormGroup.controls[&#x27;entrecalle1&#x27;].setValue(data.ENTRECALLE1);
        this.domicilioFormGroup.controls[&#x27;entrecalle2&#x27;].setValue(data.ENTRECALLE2);
        this.domicilioFormGroup.controls[&#x27;andador&#x27;].setValue(data.ANDADOR);
        this.domicilioFormGroup.controls[&#x27;edificio&#x27;].setValue(data.EDIFICIO);
        this.domicilioFormGroup.controls[&#x27;seccion&#x27;].setValue(data.SECCION);
        this.domicilioFormGroup.controls[&#x27;entrada&#x27;].setValue(data.ENTRADA);
        this.domicilioFormGroup.controls[&#x27;ninterior&#x27;].setValue(data.NUMEROINTERIOR);
        this.domicilioFormGroup.controls[&#x27;telefono&#x27;].setValue(data.TELEFONO);
        this.domicilioFormGroup.controls[&#x27;adicional&#x27;].setValue(data.INDICACIONESADICIONALES);
        this.domicilioFormGroup.controls[&#x27;id_direccion&#x27;].setValue(data.IDDIRECCION);
    
        if(data.CODESTADO &#x3D;&#x3D; 9){
            // alert(&#x27;funciona&#x27;);
            this.domicilioFormGroup.controls[&#x27;idmunicipio&#x27;].setValue(data.IDDELEGACION);
        } else {
            this.domicilioFormGroup.controls[&#x27;idmunicipio2&#x27;].setValue(data.CODMUNICIPIO);
            this.domicilioFormGroup.controls[&#x27;municipio&#x27;].setValue(data.DELEGACION);
            this.domicilioFormGroup.controls[&#x27;ciudad&#x27;].setValue(data.CIUDAD);
            this.domicilioFormGroup.controls[&#x27;idciudad&#x27;].setValue(data.CODCIUDAD);
        }
    }

    getMunicipios(){
        this.dataDomicilio.idestado &#x3D; this.domicilioFormGroup.value.idestado;
        const dialogRef &#x3D; this.dialog.open(DialogMunicipiosSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                console.log(&quot;MUNICIPIOS!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;idmunicipio2&#x27;].setValue(result.codmunicipio);
                this.domicilioFormGroup.controls[&#x27;municipio&#x27;].setValue(result.municipio);
                this.botonCiudad &#x3D; false;
            }
        });
    }

    getCiudad(){
        this.dataDomicilio.idmunicipio2 &#x3D; this.domicilioFormGroup.value.idmunicipio2;
        const dialogRef &#x3D; this.dialog.open(DialogCiudadSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado,
                    codMunicipio : this.dataDomicilio.idmunicipio2
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.botonAsentamiento &#x3D; false;
                console.log(&quot;CIUDAD!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;idciudad&#x27;].setValue(result.codciudad);
                this.domicilioFormGroup.controls[&#x27;ciudad&#x27;].setValue(result.ciudad);
            }
        });
    }

    getAsentamiento(){
        this.dataDomicilio.idestado &#x3D; this.domicilioFormGroup.value.idestado;
        this.dataDomicilio.idmunicipio &#x3D; this.domicilioFormGroup.value.idmunicipio;
        this.dataDomicilio.idmunicipio2 &#x3D; this.domicilioFormGroup.value.idmunicipio2;
        this.dataDomicilio.idciudad &#x3D; (this.domicilioFormGroup.value.idciudad) ? this.domicilioFormGroup.value.idciudad : null;
        const dialogRef &#x3D; this.dialog.open(DialogAsentamientoSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado,
                    codMunicipio : this.dataDomicilio.idmunicipio,
                    codMunicipio2 : this.dataDomicilio.idmunicipio2,
                    codCiudad : this.dataDomicilio.idciudad
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                this.botonVia &#x3D; false;
                console.log(&quot;ASENTAMIENTO!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;codasentamiento&#x27;].setValue(result.codasentamiento);
                this.domicilioFormGroup.controls[&#x27;asentamiento&#x27;].setValue(result.asentamiento);
                this.domicilioFormGroup.controls[&#x27;idtipoasentamiento&#x27;].setValue(result.codtiposasentamiento);
                this.domicilioFormGroup.controls[&#x27;cp&#x27;].setValue(result.codigopostal);
            }
        });
    }

    getVia(){
        this.dataDomicilio.codasentamiento &#x3D;  this.domicilioFormGroup.value.codasentamiento;
        const dialogRef &#x3D; this.dialog.open(DialogViaSociedad, {
            width: &#x27;700px&#x27;,
            data: {codEstado : this.dataDomicilio.idestado,
                    codAsentamiento : this.dataDomicilio.codasentamiento
            }
        });
        dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
            if(result){
                console.log(&quot;VIA!!!!!!!&quot;);
                console.log(result);
                this.domicilioFormGroup.controls[&#x27;codtiposvia&#x27;].setValue(result.codtiposvia);
                this.domicilioFormGroup.controls[&#x27;idtipovia&#x27;].setValue(result.idvia);
                this.domicilioFormGroup.controls[&#x27;via&#x27;].setValue(result.via);
            }
        });
    }


  }</code></pre>
    </div>
</div>


                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'DatosSociedadPersona.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
